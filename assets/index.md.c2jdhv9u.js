import{z as r,o as a,a as l,E as o,j as E,h as s,J as p,Q as y}from"./chunks/framework.WzogXxb6.js";const i=[{node:0,name:"Del. Miguel Hidalgo",id:"node_0",color:"#FFF"},{node:1,name:"Del. Cuajimalpa de Morelos",id:"node_1",color:"#FFF"},{node:2,name:"Del. Álvaro Obregón",id:"node_2",color:"#FFF"},{node:3,name:"Del. La Magdalena Contreras",id:"node_3",color:"#FFF"},{node:4,name:"Del. Tlalpan",id:"node_4",color:"#FFF"},{node:5,name:"Del. Coyoacán",id:"node_5",color:"#FFF"},{node:6,name:"Del. Xochimilco",id:"node_6",color:"#FFF"},{node:7,name:"Del. Tláhuac",id:"node_7",color:"#FFF"},{node:8,name:"Del. Milpa Alta",id:"node_8",color:"#FFF"},{node:9,name:"Del. Venustiano Carranza",id:"node_9",color:"#FFF"},{node:10,name:"Del. Benito Juárez",id:"node_10",color:"#FFF"},{node:11,name:"Del. Iztacalco",id:"node_11",color:"#FFF"},{node:12,name:"Del. Iztapalapa",id:"node_12",color:"#FFF"},{node:13,name:"Del. Cuauhtémoc",id:"node_13",color:"#FFF"},{node:14,name:"Del. Gustavo A. Madero",id:"node_14",color:"#FFF"},{node:15,name:"Del. Azcapotzalco",id:"node_15",color:"#FFF"},{node:16,name:"Recolección CEDA",id:"node_16",color:"#FFF"},{node:17,name:"Recolección Particular",id:"node_17",color:"#FFF"},{node:18,name:"Recolección DGSU",id:"node_18",color:"#FFF"},{node:19,name:"Recolección RME",id:"node_19",color:"#FFF"},{node:20,name:"Recolección Edo. de México",id:"node_20",color:"#FFF"},{node:21,name:"Transferencia 1",id:"node_21",color:"#FFF"},{node:22,name:"Transferencia 2",id:"node_22",color:"#FFF"},{node:23,name:"Transferencia 3",id:"node_23",color:"#FFF"},{node:24,name:"Transferencia 4",id:"node_24",color:"#FFF"},{node:25,name:"Transferencia 5",id:"node_25",color:"#FFF"},{node:26,name:"Transferencia 6",id:"node_26",color:"#FFF"},{node:27,name:"Transferencia 7",id:"node_27",color:"#FFF"},{node:28,name:"Transferencia 8",id:"node_28",color:"#FFF"},{node:29,name:"Transferencia 9",id:"node_29",color:"#FFF"},{node:30,name:"Transferencia 10",id:"node_30",color:"#FFF"},{node:31,name:"Transferencia 11",id:"node_31",color:"#FFF"},{node:32,name:"Transferencia 12",id:"node_32",color:"#FFF"},{node:33,name:"Planta de Composta",id:"node_33",color:"#FFF"},{node:34,name:"Planta Compactadora",id:"node_34",color:"#FFF"},{node:35,name:"Disposición 1",id:"node_35",color:"#FFF"},{node:36,name:"Disposición 2",id:"node_36",color:"#FFF"},{node:37,name:"Disposición 3",id:"node_37",color:"#FFF"},{node:38,name:"Disposición 4",id:"node_38",color:"#FFF"},{node:39,name:"Disposición 5",id:"node_39",color:"#FFF"},{node:40,name:"Planta de Selección 1",id:"node_40",color:"#FFF"},{node:41,name:"Planta de Selección 2",id:"node_41",color:"#FFF"},{node:42,name:"Recuperación",id:"node_42",color:"#FFF"}],F=[{source:"Del. Miguel Hidalgo",target:"Transferencia 1",value:0,color:"#EFF"},{source:"Del. Miguel Hidalgo",target:"Transferencia 2",value:0,color:"#EFF"},{source:"Del. Cuajimalpa de Morelos",target:"Transferencia 2",value:0,color:"#EFF"},{source:"Del. Álvaro Obregón",target:"Transferencia 2",value:0,color:"#EFF"},{source:"Del. La Magdalena Contreras",target:"Transferencia 2",value:0,color:"#EFF"},{source:"Del. La Magdalena Contreras",target:"Transferencia 3",value:0,color:"#EFF"},{source:"Del. Tlalpan",target:"Transferencia 3",value:0,color:"#EFF"},{source:"Del. Tlalpan",target:"Transferencia 4",value:0,color:"#EFF"},{source:"Del. Coyoacán",target:"Transferencia 4",value:0,color:"#EFF"},{source:"Del. Xochimilco",target:"Transferencia 4",value:0,color:"#EFF"},{source:"Del. Xochimilco",target:"Transferencia 5",value:0,color:"#EFF"},{source:"Del. Tláhuac",target:"Transferencia 5",value:0,color:"#EFF"},{source:"Del. Milpa Alta",target:"Transferencia 6",value:0,color:"#EFF"},{source:"Del. Venustiano Carranza",target:"Transferencia 7",value:0,color:"#EFF"},{source:"Del. Benito Juárez",target:"Transferencia 8",value:0,color:"#EFF"},{source:"Del. Iztacalco",target:"Transferencia 9",value:0,color:"#EFF"},{source:"Del. Iztapalapa",target:"Transferencia 9",value:0,color:"#EFF"},{source:"Del. Cuauhtémoc",target:"Transferencia 10",value:0,color:"#EFF"},{source:"Del. Gustavo A. Madero",target:"Transferencia 11",value:0,color:"#EFF"},{source:"Del. Azcapotzalco",target:"Transferencia 12",value:0,color:"#EFF"},{source:"Recolección CEDA",target:"Transferencia 1",value:0,color:"#EFF"},{source:"Recolección CEDA",target:"Transferencia 2",value:0,color:"#EFF"},{source:"Recolección CEDA",target:"Transferencia 3",value:0,color:"#EFF"},{source:"Recolección CEDA",target:"Transferencia 4",value:0,color:"#EFF"},{source:"Recolección CEDA",target:"Transferencia 5",value:0,color:"#EFF"},{source:"Recolección CEDA",target:"Transferencia 6",value:0,color:"#EFF"},{source:"Recolección CEDA",target:"Transferencia 7",value:0,color:"#EFF"},{source:"Recolección CEDA",target:"Transferencia 8",value:0,color:"#EFF"},{source:"Recolección CEDA",target:"Transferencia 9",value:0,color:"#EFF"},{source:"Recolección CEDA",target:"Transferencia 10",value:0,color:"#EFF"},{source:"Recolección CEDA",target:"Transferencia 11",value:0,color:"#EFF"},{source:"Recolección CEDA",target:"Transferencia 12",value:0,color:"#EFF"},{source:"Recolección Particular",target:"Transferencia 1",value:0,color:"#EFF"},{source:"Recolección Particular",target:"Transferencia 2",value:0,color:"#EFF"},{source:"Recolección Particular",target:"Transferencia 3",value:0,color:"#EFF"},{source:"Recolección Particular",target:"Transferencia 4",value:0,color:"#EFF"},{source:"Recolección Particular",target:"Transferencia 5",value:0,color:"#EFF"},{source:"Recolección Particular",target:"Transferencia 6",value:0,color:"#EFF"},{source:"Recolección Particular",target:"Transferencia 7",value:0,color:"#EFF"},{source:"Recolección Particular",target:"Transferencia 8",value:0,color:"#EFF"},{source:"Recolección Particular",target:"Transferencia 9",value:0,color:"#EFF"},{source:"Recolección Particular",target:"Transferencia 10",value:0,color:"#EFF"},{source:"Recolección Particular",target:"Transferencia 11",value:0,color:"#EFF"},{source:"Recolección Particular",target:"Transferencia 12",value:0,color:"#EFF"},{source:"Recolección DGSU",target:"Transferencia 1",value:0,color:"#EFF"},{source:"Recolección DGSU",target:"Transferencia 2",value:0,color:"#EFF"},{source:"Recolección DGSU",target:"Transferencia 3",value:0,color:"#EFF"},{source:"Recolección DGSU",target:"Transferencia 4",value:0,color:"#EFF"},{source:"Recolección DGSU",target:"Transferencia 5",value:0,color:"#EFF"},{source:"Recolección DGSU",target:"Transferencia 6",value:0,color:"#EFF"},{source:"Recolección DGSU",target:"Transferencia 7",value:0,color:"#EFF"},{source:"Recolección DGSU",target:"Transferencia 8",value:0,color:"#EFF"},{source:"Recolección DGSU",target:"Transferencia 9",value:0,color:"#EFF"},{source:"Recolección DGSU",target:"Transferencia 10",value:0,color:"#EFF"},{source:"Recolección DGSU",target:"Transferencia 11",value:0,color:"#EFF"},{source:"Recolección DGSU",target:"Transferencia 12",value:0,color:"#EFF"},{source:"Recolección DGSU",target:"Planta de Selección 1",value:0,color:"#EFF"},{source:"Recolección DGSU",target:"Planta de Selección 2",value:0,color:"#EFF"},{source:"Recolección Edo. de México",target:"Planta de Selección 1",value:1,color:"#BA3377"},{source:"Recolección Edo. de México",target:"Planta de Selección 2",value:1,color:"#BA3377"},{source:"Recolección RME",target:"Disposición 1",value:0,color:"#EFF"},{source:"Recolección RME",target:"Disposición 2",value:0,color:"#EFF"},{source:"Recolección RME",target:"Disposición 3",value:0,color:"#EFF"},{source:"Recolección RME",target:"Disposición 4",value:0,color:"#EFF"},{source:"Recolección RME",target:"Disposición 5",value:0,color:"#EFF"},{source:"Transferencia 2",target:"Planta de Composta",value:14.6,color:"#6D3F56"},{source:"Transferencia 3",target:"Planta de Composta",value:111.7,color:"#6D3F56"},{source:"Transferencia 4",target:"Planta de Composta",value:294.1,color:"#6D3F56"},{source:"Transferencia 5",target:"Planta de Composta",value:7.8,color:"#6D3F56"},{source:"Transferencia 6",target:"Planta de Composta",value:2.2,color:"#6D3F56"},{source:"Transferencia 7",target:"Planta de Composta",value:10.6,color:"#6D3F56"},{source:"Transferencia 8",target:"Planta de Composta",value:4.5,color:"#6D3F56"},{source:"Transferencia 9",target:"Planta de Composta",value:19.1,color:"#6D3F56"},{source:"Transferencia 10",target:"Planta de Composta",value:5.1,color:"#6D3F56"},{source:"Transferencia 11",target:"Planta de Composta",value:11.9,color:"#6D3F56"},{source:"Transferencia 12",target:"Planta de Composta",value:10.4,color:"#6D3F56"},{source:"Transferencia 1",target:"Planta Compactadora",value:4.4,color:"#6D1E46"},{source:"Transferencia 2",target:"Planta Compactadora",value:4.4,color:"#6D1E46"},{source:"Transferencia 3",target:"Planta Compactadora",value:4.4,color:"#6D1E46"},{source:"Transferencia 4",target:"Planta Compactadora",value:4.4,color:"#6D1E46"},{source:"Transferencia 5",target:"Planta Compactadora",value:4.4,color:"#6D1E46"},{source:"Transferencia 6",target:"Planta Compactadora",value:4.4,color:"#6D1E46"},{source:"Transferencia 7",target:"Planta Compactadora",value:4.4,color:"#6D1E46"},{source:"Transferencia 8",target:"Planta Compactadora",value:4.4,color:"#6D1E46"},{source:"Transferencia 9",target:"Planta Compactadora",value:4.4,color:"#6D1E46"},{source:"Transferencia 10",target:"Planta Compactadora",value:4.4,color:"#6D1E46"},{source:"Transferencia 11",target:"Planta Compactadora",value:4.4,color:"#6D1E46"},{source:"Transferencia 12",target:"Planta Compactadora",value:4.4,color:"#6D1E46"},{source:"Transferencia 1",target:"Disposición 1",value:0,color:"transparent"},{source:"Transferencia 2",target:"Disposición 1",value:19,color:"#ED4197"},{source:"Transferencia 2",target:"Disposición 2",value:30,color:"#ED4197"},{source:"Transferencia 2",target:"Disposición 3",value:27,color:"#ED4197"},{source:"Transferencia 3",target:"Disposición 1",value:6.6,color:"#ED4197"},{source:"Transferencia 3",target:"Disposición 2",value:12.2,color:"#ED4197"},{source:"Transferencia 4",target:"Disposición 1",value:22.6,color:"#ED4197"},{source:"Transferencia 4",target:"Disposición 2",value:33,color:"#ED4197"},{source:"Transferencia 4",target:"Disposición 4",value:.6,color:"#ED4197"},{source:"Transferencia 4",target:"Disposición 5",value:.6,color:"#ED4197"},{source:"Transferencia 5",target:"Disposición 1",value:8.8,color:"#ED4197"},{source:"Transferencia 5",target:"Disposición 2",value:14.1,color:"#ED4197"},{source:"Transferencia 5",target:"Disposición 3",value:.014,color:"#ED4197"},{source:"Transferencia 6",target:"Disposición 1",value:.6,color:"#ED4197"},{source:"Transferencia 6",target:"Disposición 2",value:2.2,color:"#ED4197"},{source:"Transferencia 6",target:"Disposición 3",value:.004,color:"#ED4197"},{source:"Transferencia 7",target:"Disposición 1",value:35.3,color:"#ED4197"},{source:"Transferencia 7",target:"Disposición 2",value:2.7,color:"#ED4197"},{source:"Transferencia 7",target:"Disposición 4",value:.4,color:"#ED4197"},{source:"Transferencia 8",target:"Disposición 1",value:6.7,color:"#ED4197"},{source:"Transferencia 8",target:"Disposición 2",value:11,color:"#ED4197"},{source:"Transferencia 8",target:"Disposición 3",value:3.8,color:"#ED4197"},{source:"Transferencia 8",target:"Disposición 4",value:.3,color:"#ED4197"},{source:"Transferencia 9",target:"Disposición 1",value:41.9,color:"#ED4197"},{source:"Transferencia 9",target:"Disposición 2",value:57.9,color:"#ED4197"},{source:"Transferencia 9",target:"Disposición 3",value:.9,color:"#ED4197"},{source:"Transferencia 9",target:"Disposición 4",value:3.6,color:"#ED4197"},{source:"Transferencia 10",target:"Disposición 1",value:15,color:"#ED4197"},{source:"Transferencia 10",target:"Disposición 2",value:28.6,color:"#ED4197"},{source:"Transferencia 10",target:"Disposición 3",value:3.9,color:"#ED4197"},{source:"Transferencia 10",target:"Disposición 4",value:1.9,color:"#ED4197"},{source:"Transferencia 11",target:"Disposición 1",value:.6,color:"#ED4197"},{source:"Transferencia 11",target:"Disposición 2",value:.9,color:"#ED4197"},{source:"Transferencia 11",target:"Disposición 3",value:1.3,color:"#ED4197"},{source:"Transferencia 11",target:"Disposición 4",value:.08,color:"#ED4197"},{source:"Transferencia 12",target:"Disposición 1",value:27,color:"#ED4197"},{source:"Transferencia 12",target:"Disposición 2",value:9,color:"#ED4197"},{source:"Transferencia 12",target:"Disposición 3",value:35,color:"#ED4197"},{source:"Transferencia 12",target:"Disposición 4",value:1,color:"#ED4197"},{source:"Transferencia 2",target:"Planta de Selección 1",value:29.5,color:"#BA3377"},{source:"Transferencia 2",target:"Planta de Selección 2",value:8.1,color:"#BA3377"},{source:"Transferencia 3",target:"Planta de Selección 1",value:.7,color:"#BA3377"},{source:"Transferencia 3",target:"Planta de Selección 2",value:3.4,color:"#BA3377"},{source:"Transferencia 4",target:"Planta de Selección 1",value:12.2,color:"#BA3377"},{source:"Transferencia 4",target:"Planta de Selección 2",value:7.6,color:"#BA3377"},{source:"Transferencia 5",target:"Planta de Selección 1",value:.4,color:"#BA3377"},{source:"Transferencia 5",target:"Planta de Selección 2",value:7.3,color:"#BA3377"},{source:"Transferencia 6",target:"Planta de Selección 1",value:.003,color:"#BA3377"},{source:"Transferencia 6",target:"Planta de Selección 2",value:1,color:"#BA3377"},{source:"Transferencia 7",target:"Planta de Selección 1",value:2,color:"#BA3377"},{source:"Transferencia 7",target:"Planta de Selección 2",value:3.8,color:"#BA3377"},{source:"Transferencia 8",target:"Planta de Selección 1",value:7.2,color:"#BA3377"},{source:"Transferencia 8",target:"Planta de Selección 2",value:3.1,color:"#BA3377"},{source:"Transferencia 9",target:"Planta de Selección 1",value:34.3,color:"#BA3377"},{source:"Transferencia 9",target:"Planta de Selección 2",value:4.6,color:"#BA3377"},{source:"Transferencia 10",target:"Planta de Selección 1",value:9,color:"#BA3377"},{source:"Transferencia 10",target:"Planta de Selección 2",value:4.9,color:"#BA3377"},{source:"Transferencia 11",target:"Planta de Selección 1",value:.6,color:"#BA3377"},{source:"Transferencia 12",target:"Planta de Selección 1",value:16.8,color:"#BA3377"},{source:"Transferencia 12",target:"Planta de Selección 2",value:4.9,color:"#BA3377"},{source:"Planta de Selección 1",target:"Disposición 1",value:1,color:"#EFF"},{source:"Planta de Selección 1",target:"Disposición 2",value:1,color:"#EFF"},{source:"Planta de Selección 1",target:"Disposición 3",value:1,color:"#EFF"},{source:"Planta de Selección 1",target:"Disposición 4",value:1,color:"#EFF"},{source:"Planta de Selección 1",target:"Disposición 5",value:1,color:"#EFF"},{source:"Planta de Selección 2",target:"Disposición 2",value:1,color:"#EFF"},{source:"Planta de Selección 2",target:"Disposición 3",value:1,color:"#EFF"},{source:"Planta de Selección 2",target:"Disposición 1",value:1,color:"#EFF"},{source:"Planta de Selección 2",target:"Disposición 4",value:1,color:"#EFF"},{source:"Planta de Selección 2",target:"Disposición 5",value:1,color:"#EFF"},{source:"Planta de Selección 1",target:"Recuperación",value:8,color:"#EFF"},{source:"Planta de Selección 2",target:"Recuperación",value:9,color:"#EFF"}],d={nodes:i,links:F},u={__name:"basico",setup(e){const n=d;return(c,v)=>{const t=r("FlujoResiduosSolidosUrbanosCDMX");return a(),l("div",null,[o(t,{datos:E(n)},null,8,["datos"])])}}},C=s("h1",{id:"flujo-de-residuos-solidos-urbanos-de-la-cdmx",tabindex:"-1"},[p("Flujo de Residuos Solidos Urbanos de la CDMX "),s("a",{class:"header-anchor",href:"#flujo-de-residuos-solidos-urbanos-de-la-cdmx","aria-label":'Permalink to "Flujo de Residuos Solidos Urbanos de la CDMX"'},"​")],-1),B=s("h2",{id:"arriba",tabindex:"-1"},[p("Arriba "),s("a",{class:"header-anchor",href:"#arriba","aria-label":'Permalink to "Arriba"'},"​")],-1),g=y(`<h2 id="acronyms-and-abbreviations" tabindex="-1">Acronyms_and_abbreviations <a class="header-anchor" href="#acronyms-and-abbreviations" aria-label="Permalink to &quot;Acronyms_and_abbreviations&quot;">​</a></h2><p>DGSU: Dirección General de Servicios Urbanos<br> CEDA: Central de Abastos<br> RME: Residuos de Manejo Especial<br> CDMX: Ciudad de México<br> RSU: Residuos Sólidos Urbanos</p><h2 id="codigo" tabindex="-1">Código <a class="header-anchor" href="#codigo" aria-label="Permalink to &quot;Código&quot;">​</a></h2><details class="details custom-block"><summary>Click me to view the code</summary><div class="language-vue vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">vue</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#E1E4E8;">&lt;</span><span style="color:#85E89D;">script</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">setup</span><span style="color:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="color:#F97583;">import</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">*</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">as</span><span style="color:#E1E4E8;"> d3 </span><span style="color:#F97583;">from</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">&#39;d3&#39;</span></span>
<span class="line"><span style="color:#F97583;">import</span><span style="color:#E1E4E8;"> { sankey, sankeyLinkHorizontal } </span><span style="color:#F97583;">from</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">&#39;d3-sankey&#39;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F97583;">import</span><span style="color:#E1E4E8;"> { onMounted, onUnmounted, ref, toRefs, watch } </span><span style="color:#F97583;">from</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">&#39;vue&#39;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F97583;">const</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">props</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">defineProps</span><span style="color:#E1E4E8;">({</span></span>
<span class="line"><span style="color:#E1E4E8;">  sankey_id: {</span></span>
<span class="line"><span style="color:#E1E4E8;">    type: String,</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#B392F0;">default</span><span style="color:#E1E4E8;">: () </span><span style="color:#F97583;">=&gt;</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">&#39;sankey&#39;</span><span style="color:#E1E4E8;">,</span></span>
<span class="line"><span style="color:#E1E4E8;">  },</span></span>
<span class="line"><span style="color:#E1E4E8;">  datos: {</span></span>
<span class="line"><span style="color:#E1E4E8;">    type: Object,</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#B392F0;">default</span><span style="color:#E1E4E8;">: () </span><span style="color:#F97583;">=&gt;</span><span style="color:#E1E4E8;"> ({</span></span>
<span class="line"><span style="color:#E1E4E8;">      nodes: [</span></span>
<span class="line"><span style="color:#E1E4E8;">        { node: </span><span style="color:#79B8FF;">0</span><span style="color:#E1E4E8;">, name: </span><span style="color:#9ECBFF;">&#39;node0&#39;</span><span style="color:#E1E4E8;">, id: </span><span style="color:#9ECBFF;">&#39;node_0&#39;</span><span style="color:#E1E4E8;">, color: </span><span style="color:#9ECBFF;">&#39;#FFF&#39;</span><span style="color:#E1E4E8;"> },</span></span>
<span class="line"><span style="color:#E1E4E8;">        { node: </span><span style="color:#79B8FF;">1</span><span style="color:#E1E4E8;">, name: </span><span style="color:#9ECBFF;">&#39;node1&#39;</span><span style="color:#E1E4E8;">, id: </span><span style="color:#9ECBFF;">&#39;node_1&#39;</span><span style="color:#E1E4E8;">, color: </span><span style="color:#9ECBFF;">&#39;#FFF&#39;</span><span style="color:#E1E4E8;"> },</span></span>
<span class="line"><span style="color:#E1E4E8;">        { node: </span><span style="color:#79B8FF;">2</span><span style="color:#E1E4E8;">, name: </span><span style="color:#9ECBFF;">&#39;node2&#39;</span><span style="color:#E1E4E8;">, id: </span><span style="color:#9ECBFF;">&#39;node_2&#39;</span><span style="color:#E1E4E8;">, color: </span><span style="color:#9ECBFF;">&#39;#FFF&#39;</span><span style="color:#E1E4E8;"> },</span></span>
<span class="line"><span style="color:#E1E4E8;">      ],</span></span>
<span class="line"><span style="color:#E1E4E8;">      links: [</span></span>
<span class="line"><span style="color:#E1E4E8;">        { source: </span><span style="color:#9ECBFF;">&#39;node0&#39;</span><span style="color:#E1E4E8;">, target: </span><span style="color:#9ECBFF;">&#39;node2&#39;</span><span style="color:#E1E4E8;">, value: </span><span style="color:#79B8FF;">1</span><span style="color:#E1E4E8;">, color: </span><span style="color:#9ECBFF;">&#39;#EFF&#39;</span><span style="color:#E1E4E8;"> },</span></span>
<span class="line"><span style="color:#E1E4E8;">        { source: </span><span style="color:#9ECBFF;">&#39;node1&#39;</span><span style="color:#E1E4E8;">, target: </span><span style="color:#9ECBFF;">&#39;node2&#39;</span><span style="color:#E1E4E8;">, value: </span><span style="color:#79B8FF;">1</span><span style="color:#E1E4E8;">, color: </span><span style="color:#9ECBFF;">&#39;#EFF&#39;</span><span style="color:#E1E4E8;"> },</span></span>
<span class="line"><span style="color:#E1E4E8;">      ],</span></span>
<span class="line"><span style="color:#E1E4E8;">    }),</span></span>
<span class="line"><span style="color:#E1E4E8;">  },</span></span>
<span class="line"><span style="color:#E1E4E8;">  alto_vis: {</span></span>
<span class="line"><span style="color:#E1E4E8;">    type: Number,</span></span>
<span class="line"><span style="color:#E1E4E8;">    default: </span><span style="color:#79B8FF;">800</span><span style="color:#E1E4E8;">,</span></span>
<span class="line"><span style="color:#E1E4E8;">  },</span></span>
<span class="line"><span style="color:#E1E4E8;">  ancho_vis: {</span></span>
<span class="line"><span style="color:#E1E4E8;">    type: Number,</span></span>
<span class="line"><span style="color:#E1E4E8;">    default: </span><span style="color:#79B8FF;">600</span><span style="color:#E1E4E8;">,</span></span>
<span class="line"><span style="color:#E1E4E8;">  },</span></span>
<span class="line"><span style="color:#E1E4E8;">  alto_nodo: {</span></span>
<span class="line"><span style="color:#E1E4E8;">    type: Number,</span></span>
<span class="line"><span style="color:#E1E4E8;">    default: </span><span style="color:#79B8FF;">20</span><span style="color:#E1E4E8;">,</span></span>
<span class="line"><span style="color:#E1E4E8;">  },</span></span>
<span class="line"><span style="color:#E1E4E8;">  ancho_nodo: {</span></span>
<span class="line"><span style="color:#E1E4E8;">    type: Number,</span></span>
<span class="line"><span style="color:#E1E4E8;">    default: </span><span style="color:#79B8FF;">15</span><span style="color:#E1E4E8;">,</span></span>
<span class="line"><span style="color:#E1E4E8;">  },</span></span>
<span class="line"><span style="color:#E1E4E8;">  separacion_nodo: {</span></span>
<span class="line"><span style="color:#E1E4E8;">    type: Number,</span></span>
<span class="line"><span style="color:#E1E4E8;">    default: </span><span style="color:#79B8FF;">10</span><span style="color:#E1E4E8;">,</span></span>
<span class="line"><span style="color:#E1E4E8;">  },</span></span>
<span class="line"><span style="color:#E1E4E8;">  margin: {</span></span>
<span class="line"><span style="color:#E1E4E8;">    type: Object,</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#B392F0;">default</span><span style="color:#E1E4E8;">: () </span><span style="color:#F97583;">=&gt;</span><span style="color:#E1E4E8;"> ({</span></span>
<span class="line"><span style="color:#E1E4E8;">      top: </span><span style="color:#79B8FF;">20</span><span style="color:#E1E4E8;">,</span></span>
<span class="line"><span style="color:#E1E4E8;">      right: </span><span style="color:#79B8FF;">20</span><span style="color:#E1E4E8;">,</span></span>
<span class="line"><span style="color:#E1E4E8;">      bottom: </span><span style="color:#79B8FF;">20</span><span style="color:#E1E4E8;">,</span></span>
<span class="line"><span style="color:#E1E4E8;">      left: </span><span style="color:#79B8FF;">20</span><span style="color:#E1E4E8;">,</span></span>
<span class="line"><span style="color:#E1E4E8;">    }),</span></span>
<span class="line"><span style="color:#E1E4E8;">  },</span></span>
<span class="line"><span style="color:#E1E4E8;">})</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F97583;">const</span><span style="color:#E1E4E8;"> { </span><span style="color:#79B8FF;">datos</span><span style="color:#E1E4E8;"> } </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">toRefs</span><span style="color:#E1E4E8;">(props)</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F97583;">const</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">svgRef</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">ref</span><span style="color:#E1E4E8;">(</span><span style="color:#9ECBFF;">&#39;&#39;</span><span style="color:#E1E4E8;">)</span></span>
<span class="line"><span style="color:#F97583;">const</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">svg</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">ref</span><span style="color:#E1E4E8;">({})</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F97583;">const</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">tooltip</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">ref</span><span style="color:#E1E4E8;">({})</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F97583;">const</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">width</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">ref</span><span style="color:#E1E4E8;">(</span><span style="color:#79B8FF;">800</span><span style="color:#E1E4E8;">)</span></span>
<span class="line"><span style="color:#F97583;">const</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">height</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">ref</span><span style="color:#E1E4E8;">(</span><span style="color:#79B8FF;">600</span><span style="color:#E1E4E8;">)</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F97583;">const</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">nodeWidth</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">ref</span><span style="color:#E1E4E8;">(</span><span style="color:#79B8FF;">15</span><span style="color:#E1E4E8;">)</span></span>
<span class="line"><span style="color:#F97583;">const</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">nodeHeight</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">ref</span><span style="color:#E1E4E8;">(</span><span style="color:#79B8FF;">20</span><span style="color:#E1E4E8;">)</span></span>
<span class="line"><span style="color:#F97583;">const</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">nodePadding</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">ref</span><span style="color:#E1E4E8;">(</span><span style="color:#79B8FF;">10</span><span style="color:#E1E4E8;">)</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F97583;">function</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">configurandoDimensionesParaSVG</span><span style="color:#E1E4E8;">() {</span></span>
<span class="line"><span style="color:#E1E4E8;">  width.value </span><span style="color:#F97583;">=</span></span>
<span class="line"><span style="color:#E1E4E8;">    document.</span><span style="color:#B392F0;">getElementById</span><span style="color:#E1E4E8;">(props.sankey_id).clientWidth </span><span style="color:#F97583;">-</span></span>
<span class="line"><span style="color:#E1E4E8;">    props.margin.left </span><span style="color:#F97583;">-</span></span>
<span class="line"><span style="color:#E1E4E8;">    props.margin.right</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E1E4E8;">  height.value </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> props.alto_vis </span><span style="color:#F97583;">+</span><span style="color:#E1E4E8;"> props.margin.top </span><span style="color:#F97583;">+</span><span style="color:#E1E4E8;"> props.margin.bottom</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E1E4E8;">  svg.value</span></span>
<span class="line"><span style="color:#E1E4E8;">    .</span><span style="color:#B392F0;">attr</span><span style="color:#E1E4E8;">(</span><span style="color:#9ECBFF;">&#39;width&#39;</span><span style="color:#E1E4E8;">, width.value </span><span style="color:#F97583;">+</span><span style="color:#E1E4E8;"> props.margin.left </span><span style="color:#F97583;">+</span><span style="color:#E1E4E8;"> props.margin.right)</span></span>
<span class="line"><span style="color:#E1E4E8;">    .</span><span style="color:#B392F0;">attr</span><span style="color:#E1E4E8;">(</span><span style="color:#9ECBFF;">&#39;height&#39;</span><span style="color:#E1E4E8;">, height.value </span><span style="color:#F97583;">+</span><span style="color:#E1E4E8;"> props.margin.top </span><span style="color:#F97583;">+</span><span style="color:#E1E4E8;"> props.margin.bottom)</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#6A737D;">// const extent = [</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#6A737D;">//   [props.margin.left, props.margin.top],</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#6A737D;">//   [width.value, height.value],</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#6A737D;">// ]</span></span>
<span class="line"><span style="color:#E1E4E8;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F97583;">function</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">creandoSankey</span><span style="color:#E1E4E8;">() {</span></span>
<span class="line"><span style="color:#E1E4E8;">  svg.value.</span><span style="color:#B392F0;">attr</span><span style="color:#E1E4E8;">(</span><span style="color:#9ECBFF;">&#39;viewBox&#39;</span><span style="color:#E1E4E8;">, [</span><span style="color:#79B8FF;">0</span><span style="color:#E1E4E8;">, </span><span style="color:#F97583;">-</span><span style="color:#79B8FF;">20</span><span style="color:#E1E4E8;">, width.value, height.value </span><span style="color:#F97583;">+</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">20</span><span style="color:#E1E4E8;">])</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#F97583;">const</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">itemsGrafica</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> datos.value</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#F97583;">const</span><span style="color:#E1E4E8;"> { </span><span style="color:#79B8FF;">nodes</span><span style="color:#E1E4E8;">, </span><span style="color:#79B8FF;">links</span><span style="color:#E1E4E8;"> } </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">sankey</span><span style="color:#E1E4E8;">()</span></span>
<span class="line"><span style="color:#E1E4E8;">    .</span><span style="color:#B392F0;">nodeId</span><span style="color:#E1E4E8;">(</span><span style="color:#FFAB70;">d</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">=&gt;</span><span style="color:#E1E4E8;"> d.name)</span></span>
<span class="line"><span style="color:#E1E4E8;">    .</span><span style="color:#B392F0;">nodeWidth</span><span style="color:#E1E4E8;">(nodeWidth.value)</span></span>
<span class="line"><span style="color:#E1E4E8;">    .</span><span style="color:#B392F0;">nodeSort</span><span style="color:#E1E4E8;">(</span><span style="color:#79B8FF;">false</span><span style="color:#E1E4E8;">)</span></span>
<span class="line"><span style="color:#E1E4E8;">    .</span><span style="color:#B392F0;">nodePadding</span><span style="color:#E1E4E8;">(nodePadding.value)</span></span>
<span class="line"><span style="color:#E1E4E8;">    .</span><span style="color:#B392F0;">extent</span><span style="color:#E1E4E8;">([</span></span>
<span class="line"><span style="color:#E1E4E8;">      [</span><span style="color:#79B8FF;">1</span><span style="color:#E1E4E8;">, </span><span style="color:#79B8FF;">1</span><span style="color:#E1E4E8;">],</span></span>
<span class="line"><span style="color:#E1E4E8;">      [width.value, height.value </span><span style="color:#F97583;">-</span><span style="color:#E1E4E8;"> nodeHeight.value],</span></span>
<span class="line"><span style="color:#E1E4E8;">    ])(itemsGrafica)</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#F97583;">const</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">link</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> svg.value</span></span>
<span class="line"><span style="color:#E1E4E8;">    .</span><span style="color:#B392F0;">append</span><span style="color:#E1E4E8;">(</span><span style="color:#9ECBFF;">&#39;g&#39;</span><span style="color:#E1E4E8;">)</span></span>
<span class="line"><span style="color:#E1E4E8;">    .</span><span style="color:#B392F0;">attr</span><span style="color:#E1E4E8;">(</span><span style="color:#9ECBFF;">&#39;class&#39;</span><span style="color:#E1E4E8;">, </span><span style="color:#9ECBFF;">&#39;grupo-links&#39;</span><span style="color:#E1E4E8;">)</span></span>
<span class="line"><span style="color:#E1E4E8;">    .</span><span style="color:#B392F0;">attr</span><span style="color:#E1E4E8;">(</span><span style="color:#9ECBFF;">&#39;fill&#39;</span><span style="color:#E1E4E8;">, </span><span style="color:#9ECBFF;">&#39;none&#39;</span><span style="color:#E1E4E8;">)</span></span>
<span class="line"><span style="color:#E1E4E8;">    .</span><span style="color:#B392F0;">attr</span><span style="color:#E1E4E8;">(</span><span style="color:#9ECBFF;">&#39;stroke-opacity&#39;</span><span style="color:#E1E4E8;">, </span><span style="color:#79B8FF;">0.7</span><span style="color:#E1E4E8;">)</span></span>
<span class="line"><span style="color:#E1E4E8;">    .</span><span style="color:#B392F0;">selectAll</span><span style="color:#E1E4E8;">(</span><span style="color:#9ECBFF;">&#39;g&#39;</span><span style="color:#E1E4E8;">)</span></span>
<span class="line"><span style="color:#E1E4E8;">    .</span><span style="color:#B392F0;">data</span><span style="color:#E1E4E8;">(links)</span></span>
<span class="line"><span style="color:#E1E4E8;">    .</span><span style="color:#B392F0;">join</span><span style="color:#E1E4E8;">(</span><span style="color:#9ECBFF;">&#39;g&#39;</span><span style="color:#E1E4E8;">)</span></span>
<span class="line"><span style="color:#E1E4E8;">    .</span><span style="color:#B392F0;">style</span><span style="color:#E1E4E8;">(</span><span style="color:#9ECBFF;">&#39;mix-blend-mode&#39;</span><span style="color:#E1E4E8;">, </span><span style="color:#9ECBFF;">&#39;multiply&#39;</span><span style="color:#E1E4E8;">)</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E1E4E8;">  tooltip.value</span></span>
<span class="line"><span style="color:#E1E4E8;">    .</span><span style="color:#B392F0;">style</span><span style="color:#E1E4E8;">(</span><span style="color:#9ECBFF;">&#39;position&#39;</span><span style="color:#E1E4E8;">, </span><span style="color:#9ECBFF;">&#39;absolute&#39;</span><span style="color:#E1E4E8;">)</span></span>
<span class="line"><span style="color:#E1E4E8;">    .</span><span style="color:#B392F0;">style</span><span style="color:#E1E4E8;">(</span><span style="color:#9ECBFF;">&#39;visibility&#39;</span><span style="color:#E1E4E8;">, </span><span style="color:#9ECBFF;">&#39;hidden&#39;</span><span style="color:#E1E4E8;">)</span></span>
<span class="line"><span style="color:#E1E4E8;">    .</span><span style="color:#B392F0;">style</span><span style="color:#E1E4E8;">(</span><span style="color:#9ECBFF;">&#39;border&#39;</span><span style="color:#E1E4E8;">, </span><span style="color:#9ECBFF;">&#39;1px solid #333&#39;</span><span style="color:#E1E4E8;">)</span></span>
<span class="line"><span style="color:#E1E4E8;">    .</span><span style="color:#B392F0;">style</span><span style="color:#E1E4E8;">(</span><span style="color:#9ECBFF;">&#39;font-family&#39;</span><span style="color:#E1E4E8;">, </span><span style="color:#9ECBFF;">&#39;Arial&#39;</span><span style="color:#E1E4E8;">)</span></span>
<span class="line"><span style="color:#E1E4E8;">    .</span><span style="color:#B392F0;">style</span><span style="color:#E1E4E8;">(</span><span style="color:#9ECBFF;">&#39;font-size&#39;</span><span style="color:#E1E4E8;">, </span><span style="color:#9ECBFF;">&#39;10pt&#39;</span><span style="color:#E1E4E8;">)</span></span>
<span class="line"><span style="color:#E1E4E8;">    .</span><span style="color:#B392F0;">style</span><span style="color:#E1E4E8;">(</span><span style="color:#9ECBFF;">&#39;font-weight&#39;</span><span style="color:#E1E4E8;">, </span><span style="color:#9ECBFF;">&#39;bold&#39;</span><span style="color:#E1E4E8;">)</span></span>
<span class="line"><span style="color:#E1E4E8;">    .</span><span style="color:#B392F0;">style</span><span style="color:#E1E4E8;">(</span><span style="color:#9ECBFF;">&#39;max-width&#39;</span><span style="color:#E1E4E8;">, </span><span style="color:#9ECBFF;">&#39;200px&#39;</span><span style="color:#E1E4E8;">)</span></span>
<span class="line"><span style="color:#E1E4E8;">    .</span><span style="color:#B392F0;">style</span><span style="color:#E1E4E8;">(</span><span style="color:#9ECBFF;">&#39;padding&#39;</span><span style="color:#E1E4E8;">, </span><span style="color:#9ECBFF;">&#39;5px&#39;</span><span style="color:#E1E4E8;">)</span></span>
<span class="line"><span style="color:#E1E4E8;">    .</span><span style="color:#B392F0;">style</span><span style="color:#E1E4E8;">(</span><span style="color:#9ECBFF;">&#39;background-color&#39;</span><span style="color:#E1E4E8;">, </span><span style="color:#9ECBFF;">&#39;#FFF&#39;</span><span style="color:#E1E4E8;">)</span></span>
<span class="line"><span style="color:#E1E4E8;">    .</span><span style="color:#B392F0;">text</span><span style="color:#E1E4E8;">(</span><span style="color:#9ECBFF;">&#39;Tooltip&#39;</span><span style="color:#E1E4E8;">)</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E1E4E8;">  link</span></span>
<span class="line"><span style="color:#E1E4E8;">    .</span><span style="color:#B392F0;">append</span><span style="color:#E1E4E8;">(</span><span style="color:#9ECBFF;">&#39;path&#39;</span><span style="color:#E1E4E8;">)</span></span>
<span class="line"><span style="color:#E1E4E8;">    .</span><span style="color:#B392F0;">attr</span><span style="color:#E1E4E8;">(</span><span style="color:#9ECBFF;">&#39;d&#39;</span><span style="color:#E1E4E8;">, </span><span style="color:#B392F0;">sankeyLinkHorizontal</span><span style="color:#E1E4E8;">())</span></span>
<span class="line"><span style="color:#E1E4E8;">    .</span><span style="color:#B392F0;">attr</span><span style="color:#E1E4E8;">(</span><span style="color:#9ECBFF;">&#39;stroke&#39;</span><span style="color:#E1E4E8;">, </span><span style="color:#FFAB70;">d</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">=&gt;</span><span style="color:#E1E4E8;"> d.color)</span></span>
<span class="line"><span style="color:#E1E4E8;">    .</span><span style="color:#B392F0;">attr</span><span style="color:#E1E4E8;">(</span><span style="color:#9ECBFF;">&#39;stroke-width&#39;</span><span style="color:#E1E4E8;">, </span><span style="color:#FFAB70;">d</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">=&gt;</span><span style="color:#E1E4E8;"> Math.</span><span style="color:#B392F0;">max</span><span style="color:#E1E4E8;">(</span><span style="color:#79B8FF;">1</span><span style="color:#E1E4E8;">, d.width))</span></span>
<span class="line"><span style="color:#E1E4E8;">    .</span><span style="color:#B392F0;">attr</span><span style="color:#E1E4E8;">(</span><span style="color:#9ECBFF;">&#39;opacity&#39;</span><span style="color:#E1E4E8;">, </span><span style="color:#9ECBFF;">&#39;0.5&#39;</span><span style="color:#E1E4E8;">)</span></span>
<span class="line"><span style="color:#E1E4E8;">    .</span><span style="color:#B392F0;">on</span><span style="color:#E1E4E8;">(</span><span style="color:#9ECBFF;">&#39;mouseover&#39;</span><span style="color:#E1E4E8;">, </span><span style="color:#F97583;">function</span><span style="color:#E1E4E8;"> (</span><span style="color:#FFAB70;">d</span><span style="color:#E1E4E8;">, </span><span style="color:#FFAB70;">i</span><span style="color:#E1E4E8;">) {</span></span>
<span class="line"><span style="color:#E1E4E8;">      d3.</span><span style="color:#B392F0;">select</span><span style="color:#E1E4E8;">(</span><span style="color:#79B8FF;">this</span><span style="color:#E1E4E8;">).</span><span style="color:#B392F0;">transition</span><span style="color:#E1E4E8;">().</span><span style="color:#B392F0;">duration</span><span style="color:#E1E4E8;">(</span><span style="color:#9ECBFF;">&#39;50&#39;</span><span style="color:#E1E4E8;">).</span><span style="color:#B392F0;">attr</span><span style="color:#E1E4E8;">(</span><span style="color:#9ECBFF;">&#39;opacity&#39;</span><span style="color:#E1E4E8;">, </span><span style="color:#9ECBFF;">&#39;1&#39;</span><span style="color:#E1E4E8;">)</span></span>
<span class="line"><span style="color:#E1E4E8;">      tooltip.value.</span><span style="color:#B392F0;">style</span><span style="color:#E1E4E8;">(</span><span style="color:#9ECBFF;">&#39;background-color&#39;</span><span style="color:#E1E4E8;">, i.color)</span></span>
<span class="line"><span style="color:#E1E4E8;">      tooltip.value.</span><span style="color:#B392F0;">style</span><span style="color:#E1E4E8;">(</span><span style="color:#9ECBFF;">&#39;color&#39;</span><span style="color:#E1E4E8;">, i.color </span><span style="color:#F97583;">===</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">&#39;#000000&#39;</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">?</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">&#39;#FFF&#39;</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">:</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">&#39;#000&#39;</span><span style="color:#E1E4E8;">)</span></span>
<span class="line"><span style="color:#E1E4E8;">      tooltip.value.</span><span style="color:#B392F0;">text</span><span style="color:#E1E4E8;">(</span></span>
<span class="line"><span style="color:#E1E4E8;">        </span><span style="color:#9ECBFF;">&#39;&#39;</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">+</span></span>
<span class="line"><span style="color:#E1E4E8;">          i.source.name </span><span style="color:#F97583;">+</span></span>
<span class="line"><span style="color:#E1E4E8;">          </span><span style="color:#9ECBFF;">&#39; → &#39;</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">+</span></span>
<span class="line"><span style="color:#E1E4E8;">          i.target.name </span><span style="color:#F97583;">+</span></span>
<span class="line"><span style="color:#E1E4E8;">          </span><span style="color:#9ECBFF;">&#39; : &#39;</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">+</span></span>
<span class="line"><span style="color:#E1E4E8;">          i.value </span><span style="color:#F97583;">+</span></span>
<span class="line"><span style="color:#E1E4E8;">          </span><span style="color:#9ECBFF;">&#39; ton/día.&#39;</span></span>
<span class="line"><span style="color:#E1E4E8;">      )</span></span>
<span class="line"><span style="color:#E1E4E8;">      tooltip.value.</span><span style="color:#B392F0;">style</span><span style="color:#E1E4E8;">(</span><span style="color:#9ECBFF;">&#39;visibility&#39;</span><span style="color:#E1E4E8;">, </span><span style="color:#9ECBFF;">&#39;visible&#39;</span><span style="color:#E1E4E8;">)</span></span>
<span class="line"><span style="color:#E1E4E8;">    })</span></span>
<span class="line"><span style="color:#E1E4E8;">    .</span><span style="color:#B392F0;">on</span><span style="color:#E1E4E8;">(</span><span style="color:#9ECBFF;">&#39;mouseout&#39;</span><span style="color:#E1E4E8;">, </span><span style="color:#F97583;">function</span><span style="color:#E1E4E8;"> () {</span></span>
<span class="line"><span style="color:#E1E4E8;">      d3.</span><span style="color:#B392F0;">select</span><span style="color:#E1E4E8;">(</span><span style="color:#79B8FF;">this</span><span style="color:#E1E4E8;">).</span><span style="color:#B392F0;">transition</span><span style="color:#E1E4E8;">().</span><span style="color:#B392F0;">duration</span><span style="color:#E1E4E8;">(</span><span style="color:#9ECBFF;">&#39;50&#39;</span><span style="color:#E1E4E8;">).</span><span style="color:#B392F0;">attr</span><span style="color:#E1E4E8;">(</span><span style="color:#9ECBFF;">&#39;opacity&#39;</span><span style="color:#E1E4E8;">, </span><span style="color:#9ECBFF;">&#39;0.5&#39;</span><span style="color:#E1E4E8;">)</span></span>
<span class="line"><span style="color:#E1E4E8;">      tooltip.value.</span><span style="color:#B392F0;">style</span><span style="color:#E1E4E8;">(</span><span style="color:#9ECBFF;">&#39;visibility&#39;</span><span style="color:#E1E4E8;">, </span><span style="color:#9ECBFF;">&#39;hidden&#39;</span><span style="color:#E1E4E8;">)</span></span>
<span class="line"><span style="color:#E1E4E8;">    })</span></span>
<span class="line"><span style="color:#E1E4E8;">    .</span><span style="color:#B392F0;">on</span><span style="color:#E1E4E8;">(</span><span style="color:#9ECBFF;">&#39;mousemove&#39;</span><span style="color:#E1E4E8;">, </span><span style="color:#F97583;">function</span><span style="color:#E1E4E8;"> (</span><span style="color:#FFAB70;">d</span><span style="color:#E1E4E8;">) {</span></span>
<span class="line"><span style="color:#E1E4E8;">      </span><span style="color:#F97583;">return</span><span style="color:#E1E4E8;"> tooltip.value</span></span>
<span class="line"><span style="color:#E1E4E8;">        .</span><span style="color:#B392F0;">style</span><span style="color:#E1E4E8;">(</span><span style="color:#9ECBFF;">&#39;top&#39;</span><span style="color:#E1E4E8;">, d.pageY </span><span style="color:#F97583;">+</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">10</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">+</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">&#39;px&#39;</span><span style="color:#E1E4E8;">)</span></span>
<span class="line"><span style="color:#E1E4E8;">        .</span><span style="color:#B392F0;">style</span><span style="color:#E1E4E8;">(</span><span style="color:#9ECBFF;">&#39;left&#39;</span><span style="color:#E1E4E8;">, d.pageX </span><span style="color:#F97583;">+</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">10</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">+</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">&#39;px&#39;</span><span style="color:#E1E4E8;">)</span></span>
<span class="line"><span style="color:#E1E4E8;">    })</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#6A737D;">// Coloca texto alado del nodo rectángulo</span></span>
<span class="line"><span style="color:#E1E4E8;">  svg.value</span></span>
<span class="line"><span style="color:#E1E4E8;">    .</span><span style="color:#B392F0;">append</span><span style="color:#E1E4E8;">(</span><span style="color:#9ECBFF;">&#39;g&#39;</span><span style="color:#E1E4E8;">)</span></span>
<span class="line"><span style="color:#E1E4E8;">    .</span><span style="color:#B392F0;">attr</span><span style="color:#E1E4E8;">(</span><span style="color:#9ECBFF;">&#39;class&#39;</span><span style="color:#E1E4E8;">, </span><span style="color:#9ECBFF;">&#39;grupo-nodos-texto&#39;</span><span style="color:#E1E4E8;">)</span></span>
<span class="line"><span style="color:#E1E4E8;">    .</span><span style="color:#B392F0;">attr</span><span style="color:#E1E4E8;">(</span><span style="color:#9ECBFF;">&#39;font-size&#39;</span><span style="color:#E1E4E8;">, </span><span style="color:#79B8FF;">9</span><span style="color:#E1E4E8;">)</span></span>
<span class="line"><span style="color:#E1E4E8;">    .</span><span style="color:#B392F0;">attr</span><span style="color:#E1E4E8;">(</span><span style="color:#9ECBFF;">&#39;font-weight&#39;</span><span style="color:#E1E4E8;">, </span><span style="color:#9ECBFF;">&#39;bold&#39;</span><span style="color:#E1E4E8;">)</span></span>
<span class="line"><span style="color:#E1E4E8;">    .</span><span style="color:#B392F0;">selectAll</span><span style="color:#E1E4E8;">(</span><span style="color:#9ECBFF;">&#39;text&#39;</span><span style="color:#E1E4E8;">)</span></span>
<span class="line"><span style="color:#E1E4E8;">    .</span><span style="color:#B392F0;">data</span><span style="color:#E1E4E8;">(nodes)</span></span>
<span class="line"><span style="color:#E1E4E8;">    .</span><span style="color:#B392F0;">join</span><span style="color:#E1E4E8;">(</span><span style="color:#9ECBFF;">&#39;text&#39;</span><span style="color:#E1E4E8;">)</span></span>
<span class="line"><span style="color:#E1E4E8;">    .</span><span style="color:#B392F0;">attr</span><span style="color:#E1E4E8;">(</span><span style="color:#9ECBFF;">&#39;x&#39;</span><span style="color:#E1E4E8;">, </span><span style="color:#FFAB70;">d</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">=&gt;</span><span style="color:#E1E4E8;"> (d.x0 </span><span style="color:#F97583;">&lt;</span><span style="color:#E1E4E8;"> width.value </span><span style="color:#F97583;">/</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">2</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">?</span><span style="color:#E1E4E8;"> d.x1 </span><span style="color:#F97583;">+</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">6</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">:</span><span style="color:#E1E4E8;"> d.x0 </span><span style="color:#F97583;">-</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">6</span><span style="color:#E1E4E8;">))</span></span>
<span class="line"><span style="color:#E1E4E8;">    .</span><span style="color:#B392F0;">attr</span><span style="color:#E1E4E8;">(</span><span style="color:#9ECBFF;">&#39;y&#39;</span><span style="color:#E1E4E8;">, </span><span style="color:#FFAB70;">d</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">=&gt;</span><span style="color:#E1E4E8;"> (d.y1 </span><span style="color:#F97583;">+</span><span style="color:#E1E4E8;"> d.y0) </span><span style="color:#F97583;">/</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">2</span><span style="color:#E1E4E8;">)</span></span>
<span class="line"><span style="color:#E1E4E8;">    .</span><span style="color:#B392F0;">attr</span><span style="color:#E1E4E8;">(</span><span style="color:#9ECBFF;">&#39;dy&#39;</span><span style="color:#E1E4E8;">, </span><span style="color:#9ECBFF;">&#39;0.35em&#39;</span><span style="color:#E1E4E8;">)</span></span>
<span class="line"><span style="color:#E1E4E8;">    .</span><span style="color:#B392F0;">attr</span><span style="color:#E1E4E8;">(</span><span style="color:#9ECBFF;">&#39;text-anchor&#39;</span><span style="color:#E1E4E8;">, </span><span style="color:#FFAB70;">d</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">=&gt;</span><span style="color:#E1E4E8;"> (d.x0 </span><span style="color:#F97583;">&lt;</span><span style="color:#E1E4E8;"> width.value </span><span style="color:#F97583;">/</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">2</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">?</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">&#39;start&#39;</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">:</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">&#39;end&#39;</span><span style="color:#E1E4E8;">))</span></span>
<span class="line"><span style="color:#E1E4E8;">    .</span><span style="color:#B392F0;">text</span><span style="color:#E1E4E8;">(</span><span style="color:#FFAB70;">d</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">=&gt;</span><span style="color:#E1E4E8;"> d.name)</span></span>
<span class="line"><span style="color:#E1E4E8;">    .</span><span style="color:#B392F0;">attr</span><span style="color:#E1E4E8;">(</span><span style="color:#9ECBFF;">&#39;class&#39;</span><span style="color:#E1E4E8;">, </span><span style="color:#9ECBFF;">&#39;node-text-rect&#39;</span><span style="color:#E1E4E8;">)</span></span>
<span class="line"><span style="color:#E1E4E8;">    .</span><span style="color:#B392F0;">attr</span><span style="color:#E1E4E8;">(</span><span style="color:#9ECBFF;">&#39;id&#39;</span><span style="color:#E1E4E8;">, </span><span style="color:#F97583;">function</span><span style="color:#E1E4E8;"> (</span><span style="color:#FFAB70;">d</span><span style="color:#E1E4E8;">, </span><span style="color:#FFAB70;">i</span><span style="color:#E1E4E8;">) {</span></span>
<span class="line"><span style="color:#E1E4E8;">      d.id </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> i</span></span>
<span class="line"><span style="color:#E1E4E8;">      </span><span style="color:#F97583;">return</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">&#39;rect-text-&#39;</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">+</span><span style="color:#E1E4E8;"> i</span></span>
<span class="line"><span style="color:#E1E4E8;">    })</span></span>
<span class="line"><span style="color:#E1E4E8;">    .</span><span style="color:#B392F0;">append</span><span style="color:#E1E4E8;">(</span><span style="color:#9ECBFF;">&#39;tspan&#39;</span><span style="color:#E1E4E8;">)</span></span>
<span class="line"><span style="color:#E1E4E8;">    .</span><span style="color:#B392F0;">attr</span><span style="color:#E1E4E8;">(</span><span style="color:#9ECBFF;">&#39;font-size&#39;</span><span style="color:#E1E4E8;">, </span><span style="color:#79B8FF;">9</span><span style="color:#E1E4E8;">)</span></span>
<span class="line"><span style="color:#E1E4E8;">    .</span><span style="color:#B392F0;">attr</span><span style="color:#E1E4E8;">(</span><span style="color:#9ECBFF;">&#39;fill-opacity&#39;</span><span style="color:#E1E4E8;">, </span><span style="color:#79B8FF;">0.7</span><span style="color:#E1E4E8;">)</span></span>
<span class="line"><span style="color:#E1E4E8;">    .</span><span style="color:#B392F0;">text</span><span style="color:#E1E4E8;">(</span><span style="color:#FFAB70;">d</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">=&gt;</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">\` (\${</span><span style="color:#E1E4E8;">d</span><span style="color:#9ECBFF;">.</span><span style="color:#E1E4E8;">value</span><span style="color:#9ECBFF;">.</span><span style="color:#B392F0;">toLocaleString</span><span style="color:#9ECBFF;">()</span><span style="color:#9ECBFF;">})\`</span><span style="color:#E1E4E8;">)</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#6A737D;">// Coloca el nodo rectángulo</span></span>
<span class="line"><span style="color:#E1E4E8;">  svg.value</span></span>
<span class="line"><span style="color:#E1E4E8;">    .</span><span style="color:#B392F0;">append</span><span style="color:#E1E4E8;">(</span><span style="color:#9ECBFF;">&#39;g&#39;</span><span style="color:#E1E4E8;">)</span></span>
<span class="line"><span style="color:#E1E4E8;">    .</span><span style="color:#B392F0;">attr</span><span style="color:#E1E4E8;">(</span><span style="color:#9ECBFF;">&#39;class&#39;</span><span style="color:#E1E4E8;">, </span><span style="color:#9ECBFF;">&#39;grupo-nodos-rectangulos&#39;</span><span style="color:#E1E4E8;">)</span></span>
<span class="line"><span style="color:#E1E4E8;">    .</span><span style="color:#B392F0;">attr</span><span style="color:#E1E4E8;">(</span><span style="color:#9ECBFF;">&#39;stroke&#39;</span><span style="color:#E1E4E8;">, </span><span style="color:#9ECBFF;">&#39;#333&#39;</span><span style="color:#E1E4E8;">)</span></span>
<span class="line"><span style="color:#E1E4E8;">    .</span><span style="color:#B392F0;">attr</span><span style="color:#E1E4E8;">(</span><span style="color:#9ECBFF;">&#39;stroke-width&#39;</span><span style="color:#E1E4E8;">, </span><span style="color:#9ECBFF;">&#39;0.75&#39;</span><span style="color:#E1E4E8;">)</span></span>
<span class="line"><span style="color:#E1E4E8;">    .</span><span style="color:#B392F0;">selectAll</span><span style="color:#E1E4E8;">(</span><span style="color:#9ECBFF;">&#39;rect&#39;</span><span style="color:#E1E4E8;">)</span></span>
<span class="line"><span style="color:#E1E4E8;">    .</span><span style="color:#B392F0;">data</span><span style="color:#E1E4E8;">(nodes)</span></span>
<span class="line"><span style="color:#E1E4E8;">    .</span><span style="color:#B392F0;">join</span><span style="color:#E1E4E8;">(</span><span style="color:#9ECBFF;">&#39;rect&#39;</span><span style="color:#E1E4E8;">)</span></span>
<span class="line"><span style="color:#E1E4E8;">    .</span><span style="color:#B392F0;">attr</span><span style="color:#E1E4E8;">(</span><span style="color:#9ECBFF;">&#39;x&#39;</span><span style="color:#E1E4E8;">, </span><span style="color:#FFAB70;">d</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">=&gt;</span><span style="color:#E1E4E8;"> d.x0 </span><span style="color:#F97583;">+</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">1</span><span style="color:#E1E4E8;">)</span></span>
<span class="line"><span style="color:#E1E4E8;">    .</span><span style="color:#B392F0;">attr</span><span style="color:#E1E4E8;">(</span><span style="color:#9ECBFF;">&#39;y&#39;</span><span style="color:#E1E4E8;">, </span><span style="color:#FFAB70;">d</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">=&gt;</span><span style="color:#E1E4E8;"> d.y0)</span></span>
<span class="line"><span style="color:#E1E4E8;">    .</span><span style="color:#B392F0;">attr</span><span style="color:#E1E4E8;">(</span><span style="color:#9ECBFF;">&#39;height&#39;</span><span style="color:#E1E4E8;">, </span><span style="color:#FFAB70;">d</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">=&gt;</span><span style="color:#E1E4E8;"> d.y1 </span><span style="color:#F97583;">-</span><span style="color:#E1E4E8;"> d.y0)</span></span>
<span class="line"><span style="color:#E1E4E8;">    .</span><span style="color:#B392F0;">attr</span><span style="color:#E1E4E8;">(</span><span style="color:#9ECBFF;">&#39;width&#39;</span><span style="color:#E1E4E8;">, </span><span style="color:#FFAB70;">d</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">=&gt;</span><span style="color:#E1E4E8;"> d.x1 </span><span style="color:#F97583;">-</span><span style="color:#E1E4E8;"> d.x0 </span><span style="color:#F97583;">-</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">2</span><span style="color:#E1E4E8;">)</span></span>
<span class="line"><span style="color:#E1E4E8;">    .</span><span style="color:#B392F0;">attr</span><span style="color:#E1E4E8;">(</span><span style="color:#9ECBFF;">&#39;fill&#39;</span><span style="color:#E1E4E8;">, </span><span style="color:#FFAB70;">d</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">=&gt;</span><span style="color:#E1E4E8;"> d.color)</span></span>
<span class="line"><span style="color:#E1E4E8;">    .</span><span style="color:#B392F0;">attr</span><span style="color:#E1E4E8;">(</span><span style="color:#9ECBFF;">&#39;class&#39;</span><span style="color:#E1E4E8;">, </span><span style="color:#9ECBFF;">&#39;node-rect&#39;</span><span style="color:#E1E4E8;">)</span></span>
<span class="line"><span style="color:#E1E4E8;">    .</span><span style="color:#B392F0;">attr</span><span style="color:#E1E4E8;">(</span><span style="color:#9ECBFF;">&#39;id&#39;</span><span style="color:#E1E4E8;">, </span><span style="color:#F97583;">function</span><span style="color:#E1E4E8;"> (</span><span style="color:#FFAB70;">d</span><span style="color:#E1E4E8;">, </span><span style="color:#FFAB70;">i</span><span style="color:#E1E4E8;">) {</span></span>
<span class="line"><span style="color:#E1E4E8;">      d.id </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> i</span></span>
<span class="line"><span style="color:#E1E4E8;">      </span><span style="color:#F97583;">return</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">&#39;rect-&#39;</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">+</span><span style="color:#E1E4E8;"> i</span></span>
<span class="line"><span style="color:#E1E4E8;">    })</span></span>
<span class="line"><span style="color:#E1E4E8;">    .</span><span style="color:#B392F0;">on</span><span style="color:#E1E4E8;">(</span><span style="color:#9ECBFF;">&#39;mouseover&#39;</span><span style="color:#E1E4E8;">, </span><span style="color:#F97583;">function</span><span style="color:#E1E4E8;"> (</span><span style="color:#FFAB70;">d</span><span style="color:#E1E4E8;">, </span><span style="color:#FFAB70;">i</span><span style="color:#E1E4E8;">) {</span></span>
<span class="line"><span style="color:#E1E4E8;">      </span><span style="color:#F97583;">let</span><span style="color:#E1E4E8;"> nodeHiglight </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> []</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E1E4E8;">      link</span></span>
<span class="line"><span style="color:#E1E4E8;">        .</span><span style="color:#B392F0;">transition</span><span style="color:#E1E4E8;">()</span></span>
<span class="line"><span style="color:#E1E4E8;">        .</span><span style="color:#B392F0;">duration</span><span style="color:#E1E4E8;">(</span><span style="color:#79B8FF;">300</span><span style="color:#E1E4E8;">)</span></span>
<span class="line"><span style="color:#E1E4E8;">        .</span><span style="color:#B392F0;">style</span><span style="color:#E1E4E8;">(</span><span style="color:#9ECBFF;">&#39;stroke-opacity&#39;</span><span style="color:#E1E4E8;">, </span><span style="color:#F97583;">function</span><span style="color:#E1E4E8;"> (</span><span style="color:#FFAB70;">l</span><span style="color:#E1E4E8;">) {</span></span>
<span class="line"><span style="color:#E1E4E8;">          </span><span style="color:#F97583;">if</span><span style="color:#E1E4E8;"> (l.source.index </span><span style="color:#F97583;">===</span><span style="color:#E1E4E8;"> i.index </span><span style="color:#F97583;">||</span><span style="color:#E1E4E8;"> l.target.index </span><span style="color:#F97583;">===</span><span style="color:#E1E4E8;"> i.index) {</span></span>
<span class="line"><span style="color:#E1E4E8;">            nodeHiglight.</span><span style="color:#B392F0;">push</span><span style="color:#E1E4E8;">(l.target.id)</span></span>
<span class="line"><span style="color:#E1E4E8;">            nodeHiglight.</span><span style="color:#B392F0;">push</span><span style="color:#E1E4E8;">(l.source.id)</span></span>
<span class="line"><span style="color:#E1E4E8;">          }</span></span>
<span class="line"><span style="color:#E1E4E8;">          </span><span style="color:#F97583;">return</span><span style="color:#E1E4E8;"> l.source.index </span><span style="color:#F97583;">===</span><span style="color:#E1E4E8;"> i.index </span><span style="color:#F97583;">||</span><span style="color:#E1E4E8;"> l.target.index </span><span style="color:#F97583;">===</span><span style="color:#E1E4E8;"> i.index</span></span>
<span class="line"><span style="color:#E1E4E8;">            </span><span style="color:#F97583;">?</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">1</span></span>
<span class="line"><span style="color:#E1E4E8;">            </span><span style="color:#F97583;">:</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">0.2</span></span>
<span class="line"><span style="color:#E1E4E8;">        })</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E1E4E8;">      tooltip.value.</span><span style="color:#B392F0;">style</span><span style="color:#E1E4E8;">(</span><span style="color:#9ECBFF;">&#39;background-color&#39;</span><span style="color:#E1E4E8;">, i.color)</span></span>
<span class="line"><span style="color:#E1E4E8;">      tooltip.value.</span><span style="color:#B392F0;">style</span><span style="color:#E1E4E8;">(</span><span style="color:#9ECBFF;">&#39;color&#39;</span><span style="color:#E1E4E8;">, i.color </span><span style="color:#F97583;">===</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">&#39;#000000&#39;</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">?</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">&#39;#FFF&#39;</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">:</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">&#39;#000&#39;</span><span style="color:#E1E4E8;">)</span></span>
<span class="line"><span style="color:#E1E4E8;">      tooltip.value.</span><span style="color:#B392F0;">text</span><span style="color:#E1E4E8;">(</span></span>
<span class="line"><span style="color:#E1E4E8;">        </span><span style="color:#9ECBFF;">&#39;&#39;</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">+</span><span style="color:#E1E4E8;"> i.name </span><span style="color:#F97583;">+</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">&#39; : &#39;</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">+</span><span style="color:#E1E4E8;"> i.value.</span><span style="color:#B392F0;">toLocaleString</span><span style="color:#E1E4E8;">() </span><span style="color:#F97583;">+</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">&#39; ton/día.&#39;</span></span>
<span class="line"><span style="color:#E1E4E8;">      )</span></span>
<span class="line"><span style="color:#E1E4E8;">      tooltip.value.</span><span style="color:#B392F0;">style</span><span style="color:#E1E4E8;">(</span><span style="color:#9ECBFF;">&#39;visibility&#39;</span><span style="color:#E1E4E8;">, </span><span style="color:#9ECBFF;">&#39;visible&#39;</span><span style="color:#E1E4E8;">)</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E1E4E8;">      d3.</span><span style="color:#B392F0;">selectAll</span><span style="color:#E1E4E8;">(</span><span style="color:#9ECBFF;">&#39;.node-rect&#39;</span><span style="color:#E1E4E8;">).</span><span style="color:#B392F0;">style</span><span style="color:#E1E4E8;">(</span><span style="color:#9ECBFF;">&#39;opacity&#39;</span><span style="color:#E1E4E8;">, </span><span style="color:#79B8FF;">0.2</span><span style="color:#E1E4E8;">)</span></span>
<span class="line"><span style="color:#E1E4E8;">      d3.</span><span style="color:#B392F0;">selectAll</span><span style="color:#E1E4E8;">(</span><span style="color:#9ECBFF;">&#39;.node-text-rect&#39;</span><span style="color:#E1E4E8;">).</span><span style="color:#B392F0;">style</span><span style="color:#E1E4E8;">(</span><span style="color:#9ECBFF;">&#39;opacity&#39;</span><span style="color:#E1E4E8;">, </span><span style="color:#79B8FF;">0.2</span><span style="color:#E1E4E8;">)</span></span>
<span class="line"><span style="color:#E1E4E8;">      </span><span style="color:#F97583;">for</span><span style="color:#E1E4E8;"> (</span><span style="color:#F97583;">let</span><span style="color:#E1E4E8;"> i </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">0</span><span style="color:#E1E4E8;">; i </span><span style="color:#F97583;">&lt;</span><span style="color:#E1E4E8;"> nodeHiglight.</span><span style="color:#79B8FF;">length</span><span style="color:#E1E4E8;">; i</span><span style="color:#F97583;">++</span><span style="color:#E1E4E8;">) {</span></span>
<span class="line"><span style="color:#E1E4E8;">        d3.</span><span style="color:#B392F0;">select</span><span style="color:#E1E4E8;">(</span><span style="color:#9ECBFF;">&#39;#rect-&#39;</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">+</span><span style="color:#E1E4E8;"> nodeHiglight[i]).</span><span style="color:#B392F0;">style</span><span style="color:#E1E4E8;">(</span><span style="color:#9ECBFF;">&#39;opacity&#39;</span><span style="color:#E1E4E8;">, </span><span style="color:#79B8FF;">1</span><span style="color:#E1E4E8;">)</span></span>
<span class="line"><span style="color:#E1E4E8;">        d3.</span><span style="color:#B392F0;">select</span><span style="color:#E1E4E8;">(</span><span style="color:#9ECBFF;">&#39;#rect-text-&#39;</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">+</span><span style="color:#E1E4E8;"> nodeHiglight[i]).</span><span style="color:#B392F0;">style</span><span style="color:#E1E4E8;">(</span><span style="color:#9ECBFF;">&#39;opacity&#39;</span><span style="color:#E1E4E8;">, </span><span style="color:#79B8FF;">1</span><span style="color:#E1E4E8;">)</span></span>
<span class="line"><span style="color:#E1E4E8;">      }</span></span>
<span class="line"><span style="color:#E1E4E8;">    })</span></span>
<span class="line"><span style="color:#E1E4E8;">    .</span><span style="color:#B392F0;">on</span><span style="color:#E1E4E8;">(</span><span style="color:#9ECBFF;">&#39;mouseleave&#39;</span><span style="color:#E1E4E8;">, </span><span style="color:#F97583;">function</span><span style="color:#E1E4E8;"> () {</span></span>
<span class="line"><span style="color:#E1E4E8;">      link.</span><span style="color:#B392F0;">transition</span><span style="color:#E1E4E8;">().</span><span style="color:#B392F0;">duration</span><span style="color:#E1E4E8;">(</span><span style="color:#79B8FF;">300</span><span style="color:#E1E4E8;">).</span><span style="color:#B392F0;">style</span><span style="color:#E1E4E8;">(</span><span style="color:#9ECBFF;">&#39;stroke-opacity&#39;</span><span style="color:#E1E4E8;">, </span><span style="color:#79B8FF;">0.5</span><span style="color:#E1E4E8;">)</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E1E4E8;">      d3.</span><span style="color:#B392F0;">selectAll</span><span style="color:#E1E4E8;">(</span><span style="color:#9ECBFF;">&#39;.node-text-rect&#39;</span><span style="color:#E1E4E8;">).</span><span style="color:#B392F0;">style</span><span style="color:#E1E4E8;">(</span><span style="color:#9ECBFF;">&#39;opacity&#39;</span><span style="color:#E1E4E8;">, </span><span style="color:#79B8FF;">1</span><span style="color:#E1E4E8;">)</span></span>
<span class="line"><span style="color:#E1E4E8;">      d3.</span><span style="color:#B392F0;">selectAll</span><span style="color:#E1E4E8;">(</span><span style="color:#9ECBFF;">&#39;.node-rect&#39;</span><span style="color:#E1E4E8;">).</span><span style="color:#B392F0;">style</span><span style="color:#E1E4E8;">(</span><span style="color:#9ECBFF;">&#39;opacity&#39;</span><span style="color:#E1E4E8;">, </span><span style="color:#79B8FF;">1</span><span style="color:#E1E4E8;">)</span></span>
<span class="line"><span style="color:#E1E4E8;">      tooltip.value.</span><span style="color:#B392F0;">style</span><span style="color:#E1E4E8;">(</span><span style="color:#9ECBFF;">&#39;visibility&#39;</span><span style="color:#E1E4E8;">, </span><span style="color:#9ECBFF;">&#39;hidden&#39;</span><span style="color:#E1E4E8;">)</span></span>
<span class="line"><span style="color:#E1E4E8;">    })</span></span>
<span class="line"><span style="color:#E1E4E8;">    .</span><span style="color:#B392F0;">on</span><span style="color:#E1E4E8;">(</span><span style="color:#9ECBFF;">&#39;mousemove&#39;</span><span style="color:#E1E4E8;">, </span><span style="color:#F97583;">function</span><span style="color:#E1E4E8;"> (</span><span style="color:#FFAB70;">d</span><span style="color:#E1E4E8;">) {</span></span>
<span class="line"><span style="color:#E1E4E8;">      </span><span style="color:#F97583;">return</span><span style="color:#E1E4E8;"> tooltip.value</span></span>
<span class="line"><span style="color:#E1E4E8;">        .</span><span style="color:#B392F0;">style</span><span style="color:#E1E4E8;">(</span><span style="color:#9ECBFF;">&#39;top&#39;</span><span style="color:#E1E4E8;">, d.pageY </span><span style="color:#F97583;">+</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">10</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">+</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">&#39;px&#39;</span><span style="color:#E1E4E8;">)</span></span>
<span class="line"><span style="color:#E1E4E8;">        .</span><span style="color:#B392F0;">style</span><span style="color:#E1E4E8;">(</span><span style="color:#9ECBFF;">&#39;left&#39;</span><span style="color:#E1E4E8;">, d.pageX </span><span style="color:#F97583;">+</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">10</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">+</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">&#39;px&#39;</span><span style="color:#E1E4E8;">)</span></span>
<span class="line"><span style="color:#E1E4E8;">    })</span></span>
<span class="line"><span style="color:#E1E4E8;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F97583;">function</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">reescalandoPantalla</span><span style="color:#E1E4E8;">() {</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#B392F0;">configurandoDimensionesParaSVG</span><span style="color:#E1E4E8;">()</span></span>
<span class="line"><span style="color:#E1E4E8;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#B392F0;">onMounted</span><span style="color:#E1E4E8;">(() </span><span style="color:#F97583;">=&gt;</span><span style="color:#E1E4E8;"> {</span></span>
<span class="line"><span style="color:#E1E4E8;">  svg.value </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> d3.</span><span style="color:#B392F0;">select</span><span style="color:#E1E4E8;">(svgRef.value)</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#6A737D;">// .attr(&#39;viewBox&#39;, [0, -20, width.value, height.value + 20])</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E1E4E8;">  tooltip.value </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> d3.</span><span style="color:#B392F0;">select</span><span style="color:#E1E4E8;">(</span><span style="color:#9ECBFF;">\`div#\${</span><span style="color:#E1E4E8;">props</span><span style="color:#9ECBFF;">.</span><span style="color:#E1E4E8;">sankey_id</span><span style="color:#9ECBFF;">}\`</span><span style="color:#E1E4E8;">).</span><span style="color:#B392F0;">select</span><span style="color:#E1E4E8;">(</span><span style="color:#9ECBFF;">&#39;div.tooltip&#39;</span><span style="color:#E1E4E8;">)</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#B392F0;">configurandoDimensionesParaSVG</span><span style="color:#E1E4E8;">()</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#B392F0;">creandoSankey</span><span style="color:#E1E4E8;">()</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E1E4E8;">  window.</span><span style="color:#B392F0;">addEventListener</span><span style="color:#E1E4E8;">(</span><span style="color:#9ECBFF;">&#39;resize&#39;</span><span style="color:#E1E4E8;">, reescalandoPantalla)</span></span>
<span class="line"><span style="color:#E1E4E8;">})</span></span>
<span class="line"></span>
<span class="line"><span style="color:#B392F0;">onUnmounted</span><span style="color:#E1E4E8;">(() </span><span style="color:#F97583;">=&gt;</span><span style="color:#E1E4E8;"> {</span></span>
<span class="line"><span style="color:#E1E4E8;">  window.</span><span style="color:#B392F0;">removeEventListener</span><span style="color:#E1E4E8;">(</span><span style="color:#9ECBFF;">&#39;resize&#39;</span><span style="color:#E1E4E8;">, reescalandoPantalla)</span></span>
<span class="line"><span style="color:#E1E4E8;">})</span></span>
<span class="line"></span>
<span class="line"><span style="color:#B392F0;">watch</span><span style="color:#E1E4E8;">(datos, () </span><span style="color:#F97583;">=&gt;</span><span style="color:#E1E4E8;"> {</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#B392F0;">configurandoDimensionesParaSVG</span><span style="color:#E1E4E8;">()</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#B392F0;">creandoSankey</span><span style="color:#E1E4E8;">()</span></span>
<span class="line"><span style="color:#E1E4E8;">})</span></span>
<span class="line"><span style="color:#E1E4E8;">&lt;/</span><span style="color:#85E89D;">script</span><span style="color:#E1E4E8;">&gt;</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#24292E;">&lt;</span><span style="color:#22863A;">script</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">setup</span><span style="color:#24292E;">&gt;</span></span>
<span class="line"><span style="color:#D73A49;">import</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">*</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">as</span><span style="color:#24292E;"> d3 </span><span style="color:#D73A49;">from</span><span style="color:#24292E;"> </span><span style="color:#032F62;">&#39;d3&#39;</span></span>
<span class="line"><span style="color:#D73A49;">import</span><span style="color:#24292E;"> { sankey, sankeyLinkHorizontal } </span><span style="color:#D73A49;">from</span><span style="color:#24292E;"> </span><span style="color:#032F62;">&#39;d3-sankey&#39;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#D73A49;">import</span><span style="color:#24292E;"> { onMounted, onUnmounted, ref, toRefs, watch } </span><span style="color:#D73A49;">from</span><span style="color:#24292E;"> </span><span style="color:#032F62;">&#39;vue&#39;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#D73A49;">const</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">props</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">defineProps</span><span style="color:#24292E;">({</span></span>
<span class="line"><span style="color:#24292E;">  sankey_id: {</span></span>
<span class="line"><span style="color:#24292E;">    type: String,</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#6F42C1;">default</span><span style="color:#24292E;">: () </span><span style="color:#D73A49;">=&gt;</span><span style="color:#24292E;"> </span><span style="color:#032F62;">&#39;sankey&#39;</span><span style="color:#24292E;">,</span></span>
<span class="line"><span style="color:#24292E;">  },</span></span>
<span class="line"><span style="color:#24292E;">  datos: {</span></span>
<span class="line"><span style="color:#24292E;">    type: Object,</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#6F42C1;">default</span><span style="color:#24292E;">: () </span><span style="color:#D73A49;">=&gt;</span><span style="color:#24292E;"> ({</span></span>
<span class="line"><span style="color:#24292E;">      nodes: [</span></span>
<span class="line"><span style="color:#24292E;">        { node: </span><span style="color:#005CC5;">0</span><span style="color:#24292E;">, name: </span><span style="color:#032F62;">&#39;node0&#39;</span><span style="color:#24292E;">, id: </span><span style="color:#032F62;">&#39;node_0&#39;</span><span style="color:#24292E;">, color: </span><span style="color:#032F62;">&#39;#FFF&#39;</span><span style="color:#24292E;"> },</span></span>
<span class="line"><span style="color:#24292E;">        { node: </span><span style="color:#005CC5;">1</span><span style="color:#24292E;">, name: </span><span style="color:#032F62;">&#39;node1&#39;</span><span style="color:#24292E;">, id: </span><span style="color:#032F62;">&#39;node_1&#39;</span><span style="color:#24292E;">, color: </span><span style="color:#032F62;">&#39;#FFF&#39;</span><span style="color:#24292E;"> },</span></span>
<span class="line"><span style="color:#24292E;">        { node: </span><span style="color:#005CC5;">2</span><span style="color:#24292E;">, name: </span><span style="color:#032F62;">&#39;node2&#39;</span><span style="color:#24292E;">, id: </span><span style="color:#032F62;">&#39;node_2&#39;</span><span style="color:#24292E;">, color: </span><span style="color:#032F62;">&#39;#FFF&#39;</span><span style="color:#24292E;"> },</span></span>
<span class="line"><span style="color:#24292E;">      ],</span></span>
<span class="line"><span style="color:#24292E;">      links: [</span></span>
<span class="line"><span style="color:#24292E;">        { source: </span><span style="color:#032F62;">&#39;node0&#39;</span><span style="color:#24292E;">, target: </span><span style="color:#032F62;">&#39;node2&#39;</span><span style="color:#24292E;">, value: </span><span style="color:#005CC5;">1</span><span style="color:#24292E;">, color: </span><span style="color:#032F62;">&#39;#EFF&#39;</span><span style="color:#24292E;"> },</span></span>
<span class="line"><span style="color:#24292E;">        { source: </span><span style="color:#032F62;">&#39;node1&#39;</span><span style="color:#24292E;">, target: </span><span style="color:#032F62;">&#39;node2&#39;</span><span style="color:#24292E;">, value: </span><span style="color:#005CC5;">1</span><span style="color:#24292E;">, color: </span><span style="color:#032F62;">&#39;#EFF&#39;</span><span style="color:#24292E;"> },</span></span>
<span class="line"><span style="color:#24292E;">      ],</span></span>
<span class="line"><span style="color:#24292E;">    }),</span></span>
<span class="line"><span style="color:#24292E;">  },</span></span>
<span class="line"><span style="color:#24292E;">  alto_vis: {</span></span>
<span class="line"><span style="color:#24292E;">    type: Number,</span></span>
<span class="line"><span style="color:#24292E;">    default: </span><span style="color:#005CC5;">800</span><span style="color:#24292E;">,</span></span>
<span class="line"><span style="color:#24292E;">  },</span></span>
<span class="line"><span style="color:#24292E;">  ancho_vis: {</span></span>
<span class="line"><span style="color:#24292E;">    type: Number,</span></span>
<span class="line"><span style="color:#24292E;">    default: </span><span style="color:#005CC5;">600</span><span style="color:#24292E;">,</span></span>
<span class="line"><span style="color:#24292E;">  },</span></span>
<span class="line"><span style="color:#24292E;">  alto_nodo: {</span></span>
<span class="line"><span style="color:#24292E;">    type: Number,</span></span>
<span class="line"><span style="color:#24292E;">    default: </span><span style="color:#005CC5;">20</span><span style="color:#24292E;">,</span></span>
<span class="line"><span style="color:#24292E;">  },</span></span>
<span class="line"><span style="color:#24292E;">  ancho_nodo: {</span></span>
<span class="line"><span style="color:#24292E;">    type: Number,</span></span>
<span class="line"><span style="color:#24292E;">    default: </span><span style="color:#005CC5;">15</span><span style="color:#24292E;">,</span></span>
<span class="line"><span style="color:#24292E;">  },</span></span>
<span class="line"><span style="color:#24292E;">  separacion_nodo: {</span></span>
<span class="line"><span style="color:#24292E;">    type: Number,</span></span>
<span class="line"><span style="color:#24292E;">    default: </span><span style="color:#005CC5;">10</span><span style="color:#24292E;">,</span></span>
<span class="line"><span style="color:#24292E;">  },</span></span>
<span class="line"><span style="color:#24292E;">  margin: {</span></span>
<span class="line"><span style="color:#24292E;">    type: Object,</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#6F42C1;">default</span><span style="color:#24292E;">: () </span><span style="color:#D73A49;">=&gt;</span><span style="color:#24292E;"> ({</span></span>
<span class="line"><span style="color:#24292E;">      top: </span><span style="color:#005CC5;">20</span><span style="color:#24292E;">,</span></span>
<span class="line"><span style="color:#24292E;">      right: </span><span style="color:#005CC5;">20</span><span style="color:#24292E;">,</span></span>
<span class="line"><span style="color:#24292E;">      bottom: </span><span style="color:#005CC5;">20</span><span style="color:#24292E;">,</span></span>
<span class="line"><span style="color:#24292E;">      left: </span><span style="color:#005CC5;">20</span><span style="color:#24292E;">,</span></span>
<span class="line"><span style="color:#24292E;">    }),</span></span>
<span class="line"><span style="color:#24292E;">  },</span></span>
<span class="line"><span style="color:#24292E;">})</span></span>
<span class="line"></span>
<span class="line"><span style="color:#D73A49;">const</span><span style="color:#24292E;"> { </span><span style="color:#005CC5;">datos</span><span style="color:#24292E;"> } </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">toRefs</span><span style="color:#24292E;">(props)</span></span>
<span class="line"></span>
<span class="line"><span style="color:#D73A49;">const</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">svgRef</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">ref</span><span style="color:#24292E;">(</span><span style="color:#032F62;">&#39;&#39;</span><span style="color:#24292E;">)</span></span>
<span class="line"><span style="color:#D73A49;">const</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">svg</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">ref</span><span style="color:#24292E;">({})</span></span>
<span class="line"></span>
<span class="line"><span style="color:#D73A49;">const</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">tooltip</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">ref</span><span style="color:#24292E;">({})</span></span>
<span class="line"></span>
<span class="line"><span style="color:#D73A49;">const</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">width</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">ref</span><span style="color:#24292E;">(</span><span style="color:#005CC5;">800</span><span style="color:#24292E;">)</span></span>
<span class="line"><span style="color:#D73A49;">const</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">height</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">ref</span><span style="color:#24292E;">(</span><span style="color:#005CC5;">600</span><span style="color:#24292E;">)</span></span>
<span class="line"></span>
<span class="line"><span style="color:#D73A49;">const</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">nodeWidth</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">ref</span><span style="color:#24292E;">(</span><span style="color:#005CC5;">15</span><span style="color:#24292E;">)</span></span>
<span class="line"><span style="color:#D73A49;">const</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">nodeHeight</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">ref</span><span style="color:#24292E;">(</span><span style="color:#005CC5;">20</span><span style="color:#24292E;">)</span></span>
<span class="line"><span style="color:#D73A49;">const</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">nodePadding</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">ref</span><span style="color:#24292E;">(</span><span style="color:#005CC5;">10</span><span style="color:#24292E;">)</span></span>
<span class="line"></span>
<span class="line"><span style="color:#D73A49;">function</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">configurandoDimensionesParaSVG</span><span style="color:#24292E;">() {</span></span>
<span class="line"><span style="color:#24292E;">  width.value </span><span style="color:#D73A49;">=</span></span>
<span class="line"><span style="color:#24292E;">    document.</span><span style="color:#6F42C1;">getElementById</span><span style="color:#24292E;">(props.sankey_id).clientWidth </span><span style="color:#D73A49;">-</span></span>
<span class="line"><span style="color:#24292E;">    props.margin.left </span><span style="color:#D73A49;">-</span></span>
<span class="line"><span style="color:#24292E;">    props.margin.right</span></span>
<span class="line"></span>
<span class="line"><span style="color:#24292E;">  height.value </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> props.alto_vis </span><span style="color:#D73A49;">+</span><span style="color:#24292E;"> props.margin.top </span><span style="color:#D73A49;">+</span><span style="color:#24292E;"> props.margin.bottom</span></span>
<span class="line"></span>
<span class="line"><span style="color:#24292E;">  svg.value</span></span>
<span class="line"><span style="color:#24292E;">    .</span><span style="color:#6F42C1;">attr</span><span style="color:#24292E;">(</span><span style="color:#032F62;">&#39;width&#39;</span><span style="color:#24292E;">, width.value </span><span style="color:#D73A49;">+</span><span style="color:#24292E;"> props.margin.left </span><span style="color:#D73A49;">+</span><span style="color:#24292E;"> props.margin.right)</span></span>
<span class="line"><span style="color:#24292E;">    .</span><span style="color:#6F42C1;">attr</span><span style="color:#24292E;">(</span><span style="color:#032F62;">&#39;height&#39;</span><span style="color:#24292E;">, height.value </span><span style="color:#D73A49;">+</span><span style="color:#24292E;"> props.margin.top </span><span style="color:#D73A49;">+</span><span style="color:#24292E;"> props.margin.bottom)</span></span>
<span class="line"></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#6A737D;">// const extent = [</span></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#6A737D;">//   [props.margin.left, props.margin.top],</span></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#6A737D;">//   [width.value, height.value],</span></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#6A737D;">// ]</span></span>
<span class="line"><span style="color:#24292E;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#D73A49;">function</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">creandoSankey</span><span style="color:#24292E;">() {</span></span>
<span class="line"><span style="color:#24292E;">  svg.value.</span><span style="color:#6F42C1;">attr</span><span style="color:#24292E;">(</span><span style="color:#032F62;">&#39;viewBox&#39;</span><span style="color:#24292E;">, [</span><span style="color:#005CC5;">0</span><span style="color:#24292E;">, </span><span style="color:#D73A49;">-</span><span style="color:#005CC5;">20</span><span style="color:#24292E;">, width.value, height.value </span><span style="color:#D73A49;">+</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">20</span><span style="color:#24292E;">])</span></span>
<span class="line"></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#D73A49;">const</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">itemsGrafica</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> datos.value</span></span>
<span class="line"></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#D73A49;">const</span><span style="color:#24292E;"> { </span><span style="color:#005CC5;">nodes</span><span style="color:#24292E;">, </span><span style="color:#005CC5;">links</span><span style="color:#24292E;"> } </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">sankey</span><span style="color:#24292E;">()</span></span>
<span class="line"><span style="color:#24292E;">    .</span><span style="color:#6F42C1;">nodeId</span><span style="color:#24292E;">(</span><span style="color:#E36209;">d</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">=&gt;</span><span style="color:#24292E;"> d.name)</span></span>
<span class="line"><span style="color:#24292E;">    .</span><span style="color:#6F42C1;">nodeWidth</span><span style="color:#24292E;">(nodeWidth.value)</span></span>
<span class="line"><span style="color:#24292E;">    .</span><span style="color:#6F42C1;">nodeSort</span><span style="color:#24292E;">(</span><span style="color:#005CC5;">false</span><span style="color:#24292E;">)</span></span>
<span class="line"><span style="color:#24292E;">    .</span><span style="color:#6F42C1;">nodePadding</span><span style="color:#24292E;">(nodePadding.value)</span></span>
<span class="line"><span style="color:#24292E;">    .</span><span style="color:#6F42C1;">extent</span><span style="color:#24292E;">([</span></span>
<span class="line"><span style="color:#24292E;">      [</span><span style="color:#005CC5;">1</span><span style="color:#24292E;">, </span><span style="color:#005CC5;">1</span><span style="color:#24292E;">],</span></span>
<span class="line"><span style="color:#24292E;">      [width.value, height.value </span><span style="color:#D73A49;">-</span><span style="color:#24292E;"> nodeHeight.value],</span></span>
<span class="line"><span style="color:#24292E;">    ])(itemsGrafica)</span></span>
<span class="line"></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#D73A49;">const</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">link</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> svg.value</span></span>
<span class="line"><span style="color:#24292E;">    .</span><span style="color:#6F42C1;">append</span><span style="color:#24292E;">(</span><span style="color:#032F62;">&#39;g&#39;</span><span style="color:#24292E;">)</span></span>
<span class="line"><span style="color:#24292E;">    .</span><span style="color:#6F42C1;">attr</span><span style="color:#24292E;">(</span><span style="color:#032F62;">&#39;class&#39;</span><span style="color:#24292E;">, </span><span style="color:#032F62;">&#39;grupo-links&#39;</span><span style="color:#24292E;">)</span></span>
<span class="line"><span style="color:#24292E;">    .</span><span style="color:#6F42C1;">attr</span><span style="color:#24292E;">(</span><span style="color:#032F62;">&#39;fill&#39;</span><span style="color:#24292E;">, </span><span style="color:#032F62;">&#39;none&#39;</span><span style="color:#24292E;">)</span></span>
<span class="line"><span style="color:#24292E;">    .</span><span style="color:#6F42C1;">attr</span><span style="color:#24292E;">(</span><span style="color:#032F62;">&#39;stroke-opacity&#39;</span><span style="color:#24292E;">, </span><span style="color:#005CC5;">0.7</span><span style="color:#24292E;">)</span></span>
<span class="line"><span style="color:#24292E;">    .</span><span style="color:#6F42C1;">selectAll</span><span style="color:#24292E;">(</span><span style="color:#032F62;">&#39;g&#39;</span><span style="color:#24292E;">)</span></span>
<span class="line"><span style="color:#24292E;">    .</span><span style="color:#6F42C1;">data</span><span style="color:#24292E;">(links)</span></span>
<span class="line"><span style="color:#24292E;">    .</span><span style="color:#6F42C1;">join</span><span style="color:#24292E;">(</span><span style="color:#032F62;">&#39;g&#39;</span><span style="color:#24292E;">)</span></span>
<span class="line"><span style="color:#24292E;">    .</span><span style="color:#6F42C1;">style</span><span style="color:#24292E;">(</span><span style="color:#032F62;">&#39;mix-blend-mode&#39;</span><span style="color:#24292E;">, </span><span style="color:#032F62;">&#39;multiply&#39;</span><span style="color:#24292E;">)</span></span>
<span class="line"></span>
<span class="line"><span style="color:#24292E;">  tooltip.value</span></span>
<span class="line"><span style="color:#24292E;">    .</span><span style="color:#6F42C1;">style</span><span style="color:#24292E;">(</span><span style="color:#032F62;">&#39;position&#39;</span><span style="color:#24292E;">, </span><span style="color:#032F62;">&#39;absolute&#39;</span><span style="color:#24292E;">)</span></span>
<span class="line"><span style="color:#24292E;">    .</span><span style="color:#6F42C1;">style</span><span style="color:#24292E;">(</span><span style="color:#032F62;">&#39;visibility&#39;</span><span style="color:#24292E;">, </span><span style="color:#032F62;">&#39;hidden&#39;</span><span style="color:#24292E;">)</span></span>
<span class="line"><span style="color:#24292E;">    .</span><span style="color:#6F42C1;">style</span><span style="color:#24292E;">(</span><span style="color:#032F62;">&#39;border&#39;</span><span style="color:#24292E;">, </span><span style="color:#032F62;">&#39;1px solid #333&#39;</span><span style="color:#24292E;">)</span></span>
<span class="line"><span style="color:#24292E;">    .</span><span style="color:#6F42C1;">style</span><span style="color:#24292E;">(</span><span style="color:#032F62;">&#39;font-family&#39;</span><span style="color:#24292E;">, </span><span style="color:#032F62;">&#39;Arial&#39;</span><span style="color:#24292E;">)</span></span>
<span class="line"><span style="color:#24292E;">    .</span><span style="color:#6F42C1;">style</span><span style="color:#24292E;">(</span><span style="color:#032F62;">&#39;font-size&#39;</span><span style="color:#24292E;">, </span><span style="color:#032F62;">&#39;10pt&#39;</span><span style="color:#24292E;">)</span></span>
<span class="line"><span style="color:#24292E;">    .</span><span style="color:#6F42C1;">style</span><span style="color:#24292E;">(</span><span style="color:#032F62;">&#39;font-weight&#39;</span><span style="color:#24292E;">, </span><span style="color:#032F62;">&#39;bold&#39;</span><span style="color:#24292E;">)</span></span>
<span class="line"><span style="color:#24292E;">    .</span><span style="color:#6F42C1;">style</span><span style="color:#24292E;">(</span><span style="color:#032F62;">&#39;max-width&#39;</span><span style="color:#24292E;">, </span><span style="color:#032F62;">&#39;200px&#39;</span><span style="color:#24292E;">)</span></span>
<span class="line"><span style="color:#24292E;">    .</span><span style="color:#6F42C1;">style</span><span style="color:#24292E;">(</span><span style="color:#032F62;">&#39;padding&#39;</span><span style="color:#24292E;">, </span><span style="color:#032F62;">&#39;5px&#39;</span><span style="color:#24292E;">)</span></span>
<span class="line"><span style="color:#24292E;">    .</span><span style="color:#6F42C1;">style</span><span style="color:#24292E;">(</span><span style="color:#032F62;">&#39;background-color&#39;</span><span style="color:#24292E;">, </span><span style="color:#032F62;">&#39;#FFF&#39;</span><span style="color:#24292E;">)</span></span>
<span class="line"><span style="color:#24292E;">    .</span><span style="color:#6F42C1;">text</span><span style="color:#24292E;">(</span><span style="color:#032F62;">&#39;Tooltip&#39;</span><span style="color:#24292E;">)</span></span>
<span class="line"></span>
<span class="line"><span style="color:#24292E;">  link</span></span>
<span class="line"><span style="color:#24292E;">    .</span><span style="color:#6F42C1;">append</span><span style="color:#24292E;">(</span><span style="color:#032F62;">&#39;path&#39;</span><span style="color:#24292E;">)</span></span>
<span class="line"><span style="color:#24292E;">    .</span><span style="color:#6F42C1;">attr</span><span style="color:#24292E;">(</span><span style="color:#032F62;">&#39;d&#39;</span><span style="color:#24292E;">, </span><span style="color:#6F42C1;">sankeyLinkHorizontal</span><span style="color:#24292E;">())</span></span>
<span class="line"><span style="color:#24292E;">    .</span><span style="color:#6F42C1;">attr</span><span style="color:#24292E;">(</span><span style="color:#032F62;">&#39;stroke&#39;</span><span style="color:#24292E;">, </span><span style="color:#E36209;">d</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">=&gt;</span><span style="color:#24292E;"> d.color)</span></span>
<span class="line"><span style="color:#24292E;">    .</span><span style="color:#6F42C1;">attr</span><span style="color:#24292E;">(</span><span style="color:#032F62;">&#39;stroke-width&#39;</span><span style="color:#24292E;">, </span><span style="color:#E36209;">d</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">=&gt;</span><span style="color:#24292E;"> Math.</span><span style="color:#6F42C1;">max</span><span style="color:#24292E;">(</span><span style="color:#005CC5;">1</span><span style="color:#24292E;">, d.width))</span></span>
<span class="line"><span style="color:#24292E;">    .</span><span style="color:#6F42C1;">attr</span><span style="color:#24292E;">(</span><span style="color:#032F62;">&#39;opacity&#39;</span><span style="color:#24292E;">, </span><span style="color:#032F62;">&#39;0.5&#39;</span><span style="color:#24292E;">)</span></span>
<span class="line"><span style="color:#24292E;">    .</span><span style="color:#6F42C1;">on</span><span style="color:#24292E;">(</span><span style="color:#032F62;">&#39;mouseover&#39;</span><span style="color:#24292E;">, </span><span style="color:#D73A49;">function</span><span style="color:#24292E;"> (</span><span style="color:#E36209;">d</span><span style="color:#24292E;">, </span><span style="color:#E36209;">i</span><span style="color:#24292E;">) {</span></span>
<span class="line"><span style="color:#24292E;">      d3.</span><span style="color:#6F42C1;">select</span><span style="color:#24292E;">(</span><span style="color:#005CC5;">this</span><span style="color:#24292E;">).</span><span style="color:#6F42C1;">transition</span><span style="color:#24292E;">().</span><span style="color:#6F42C1;">duration</span><span style="color:#24292E;">(</span><span style="color:#032F62;">&#39;50&#39;</span><span style="color:#24292E;">).</span><span style="color:#6F42C1;">attr</span><span style="color:#24292E;">(</span><span style="color:#032F62;">&#39;opacity&#39;</span><span style="color:#24292E;">, </span><span style="color:#032F62;">&#39;1&#39;</span><span style="color:#24292E;">)</span></span>
<span class="line"><span style="color:#24292E;">      tooltip.value.</span><span style="color:#6F42C1;">style</span><span style="color:#24292E;">(</span><span style="color:#032F62;">&#39;background-color&#39;</span><span style="color:#24292E;">, i.color)</span></span>
<span class="line"><span style="color:#24292E;">      tooltip.value.</span><span style="color:#6F42C1;">style</span><span style="color:#24292E;">(</span><span style="color:#032F62;">&#39;color&#39;</span><span style="color:#24292E;">, i.color </span><span style="color:#D73A49;">===</span><span style="color:#24292E;"> </span><span style="color:#032F62;">&#39;#000000&#39;</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">?</span><span style="color:#24292E;"> </span><span style="color:#032F62;">&#39;#FFF&#39;</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">:</span><span style="color:#24292E;"> </span><span style="color:#032F62;">&#39;#000&#39;</span><span style="color:#24292E;">)</span></span>
<span class="line"><span style="color:#24292E;">      tooltip.value.</span><span style="color:#6F42C1;">text</span><span style="color:#24292E;">(</span></span>
<span class="line"><span style="color:#24292E;">        </span><span style="color:#032F62;">&#39;&#39;</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">+</span></span>
<span class="line"><span style="color:#24292E;">          i.source.name </span><span style="color:#D73A49;">+</span></span>
<span class="line"><span style="color:#24292E;">          </span><span style="color:#032F62;">&#39; → &#39;</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">+</span></span>
<span class="line"><span style="color:#24292E;">          i.target.name </span><span style="color:#D73A49;">+</span></span>
<span class="line"><span style="color:#24292E;">          </span><span style="color:#032F62;">&#39; : &#39;</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">+</span></span>
<span class="line"><span style="color:#24292E;">          i.value </span><span style="color:#D73A49;">+</span></span>
<span class="line"><span style="color:#24292E;">          </span><span style="color:#032F62;">&#39; ton/día.&#39;</span></span>
<span class="line"><span style="color:#24292E;">      )</span></span>
<span class="line"><span style="color:#24292E;">      tooltip.value.</span><span style="color:#6F42C1;">style</span><span style="color:#24292E;">(</span><span style="color:#032F62;">&#39;visibility&#39;</span><span style="color:#24292E;">, </span><span style="color:#032F62;">&#39;visible&#39;</span><span style="color:#24292E;">)</span></span>
<span class="line"><span style="color:#24292E;">    })</span></span>
<span class="line"><span style="color:#24292E;">    .</span><span style="color:#6F42C1;">on</span><span style="color:#24292E;">(</span><span style="color:#032F62;">&#39;mouseout&#39;</span><span style="color:#24292E;">, </span><span style="color:#D73A49;">function</span><span style="color:#24292E;"> () {</span></span>
<span class="line"><span style="color:#24292E;">      d3.</span><span style="color:#6F42C1;">select</span><span style="color:#24292E;">(</span><span style="color:#005CC5;">this</span><span style="color:#24292E;">).</span><span style="color:#6F42C1;">transition</span><span style="color:#24292E;">().</span><span style="color:#6F42C1;">duration</span><span style="color:#24292E;">(</span><span style="color:#032F62;">&#39;50&#39;</span><span style="color:#24292E;">).</span><span style="color:#6F42C1;">attr</span><span style="color:#24292E;">(</span><span style="color:#032F62;">&#39;opacity&#39;</span><span style="color:#24292E;">, </span><span style="color:#032F62;">&#39;0.5&#39;</span><span style="color:#24292E;">)</span></span>
<span class="line"><span style="color:#24292E;">      tooltip.value.</span><span style="color:#6F42C1;">style</span><span style="color:#24292E;">(</span><span style="color:#032F62;">&#39;visibility&#39;</span><span style="color:#24292E;">, </span><span style="color:#032F62;">&#39;hidden&#39;</span><span style="color:#24292E;">)</span></span>
<span class="line"><span style="color:#24292E;">    })</span></span>
<span class="line"><span style="color:#24292E;">    .</span><span style="color:#6F42C1;">on</span><span style="color:#24292E;">(</span><span style="color:#032F62;">&#39;mousemove&#39;</span><span style="color:#24292E;">, </span><span style="color:#D73A49;">function</span><span style="color:#24292E;"> (</span><span style="color:#E36209;">d</span><span style="color:#24292E;">) {</span></span>
<span class="line"><span style="color:#24292E;">      </span><span style="color:#D73A49;">return</span><span style="color:#24292E;"> tooltip.value</span></span>
<span class="line"><span style="color:#24292E;">        .</span><span style="color:#6F42C1;">style</span><span style="color:#24292E;">(</span><span style="color:#032F62;">&#39;top&#39;</span><span style="color:#24292E;">, d.pageY </span><span style="color:#D73A49;">+</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">10</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">+</span><span style="color:#24292E;"> </span><span style="color:#032F62;">&#39;px&#39;</span><span style="color:#24292E;">)</span></span>
<span class="line"><span style="color:#24292E;">        .</span><span style="color:#6F42C1;">style</span><span style="color:#24292E;">(</span><span style="color:#032F62;">&#39;left&#39;</span><span style="color:#24292E;">, d.pageX </span><span style="color:#D73A49;">+</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">10</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">+</span><span style="color:#24292E;"> </span><span style="color:#032F62;">&#39;px&#39;</span><span style="color:#24292E;">)</span></span>
<span class="line"><span style="color:#24292E;">    })</span></span>
<span class="line"></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#6A737D;">// Coloca texto alado del nodo rectángulo</span></span>
<span class="line"><span style="color:#24292E;">  svg.value</span></span>
<span class="line"><span style="color:#24292E;">    .</span><span style="color:#6F42C1;">append</span><span style="color:#24292E;">(</span><span style="color:#032F62;">&#39;g&#39;</span><span style="color:#24292E;">)</span></span>
<span class="line"><span style="color:#24292E;">    .</span><span style="color:#6F42C1;">attr</span><span style="color:#24292E;">(</span><span style="color:#032F62;">&#39;class&#39;</span><span style="color:#24292E;">, </span><span style="color:#032F62;">&#39;grupo-nodos-texto&#39;</span><span style="color:#24292E;">)</span></span>
<span class="line"><span style="color:#24292E;">    .</span><span style="color:#6F42C1;">attr</span><span style="color:#24292E;">(</span><span style="color:#032F62;">&#39;font-size&#39;</span><span style="color:#24292E;">, </span><span style="color:#005CC5;">9</span><span style="color:#24292E;">)</span></span>
<span class="line"><span style="color:#24292E;">    .</span><span style="color:#6F42C1;">attr</span><span style="color:#24292E;">(</span><span style="color:#032F62;">&#39;font-weight&#39;</span><span style="color:#24292E;">, </span><span style="color:#032F62;">&#39;bold&#39;</span><span style="color:#24292E;">)</span></span>
<span class="line"><span style="color:#24292E;">    .</span><span style="color:#6F42C1;">selectAll</span><span style="color:#24292E;">(</span><span style="color:#032F62;">&#39;text&#39;</span><span style="color:#24292E;">)</span></span>
<span class="line"><span style="color:#24292E;">    .</span><span style="color:#6F42C1;">data</span><span style="color:#24292E;">(nodes)</span></span>
<span class="line"><span style="color:#24292E;">    .</span><span style="color:#6F42C1;">join</span><span style="color:#24292E;">(</span><span style="color:#032F62;">&#39;text&#39;</span><span style="color:#24292E;">)</span></span>
<span class="line"><span style="color:#24292E;">    .</span><span style="color:#6F42C1;">attr</span><span style="color:#24292E;">(</span><span style="color:#032F62;">&#39;x&#39;</span><span style="color:#24292E;">, </span><span style="color:#E36209;">d</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">=&gt;</span><span style="color:#24292E;"> (d.x0 </span><span style="color:#D73A49;">&lt;</span><span style="color:#24292E;"> width.value </span><span style="color:#D73A49;">/</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">2</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">?</span><span style="color:#24292E;"> d.x1 </span><span style="color:#D73A49;">+</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">6</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">:</span><span style="color:#24292E;"> d.x0 </span><span style="color:#D73A49;">-</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">6</span><span style="color:#24292E;">))</span></span>
<span class="line"><span style="color:#24292E;">    .</span><span style="color:#6F42C1;">attr</span><span style="color:#24292E;">(</span><span style="color:#032F62;">&#39;y&#39;</span><span style="color:#24292E;">, </span><span style="color:#E36209;">d</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">=&gt;</span><span style="color:#24292E;"> (d.y1 </span><span style="color:#D73A49;">+</span><span style="color:#24292E;"> d.y0) </span><span style="color:#D73A49;">/</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">2</span><span style="color:#24292E;">)</span></span>
<span class="line"><span style="color:#24292E;">    .</span><span style="color:#6F42C1;">attr</span><span style="color:#24292E;">(</span><span style="color:#032F62;">&#39;dy&#39;</span><span style="color:#24292E;">, </span><span style="color:#032F62;">&#39;0.35em&#39;</span><span style="color:#24292E;">)</span></span>
<span class="line"><span style="color:#24292E;">    .</span><span style="color:#6F42C1;">attr</span><span style="color:#24292E;">(</span><span style="color:#032F62;">&#39;text-anchor&#39;</span><span style="color:#24292E;">, </span><span style="color:#E36209;">d</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">=&gt;</span><span style="color:#24292E;"> (d.x0 </span><span style="color:#D73A49;">&lt;</span><span style="color:#24292E;"> width.value </span><span style="color:#D73A49;">/</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">2</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">?</span><span style="color:#24292E;"> </span><span style="color:#032F62;">&#39;start&#39;</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">:</span><span style="color:#24292E;"> </span><span style="color:#032F62;">&#39;end&#39;</span><span style="color:#24292E;">))</span></span>
<span class="line"><span style="color:#24292E;">    .</span><span style="color:#6F42C1;">text</span><span style="color:#24292E;">(</span><span style="color:#E36209;">d</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">=&gt;</span><span style="color:#24292E;"> d.name)</span></span>
<span class="line"><span style="color:#24292E;">    .</span><span style="color:#6F42C1;">attr</span><span style="color:#24292E;">(</span><span style="color:#032F62;">&#39;class&#39;</span><span style="color:#24292E;">, </span><span style="color:#032F62;">&#39;node-text-rect&#39;</span><span style="color:#24292E;">)</span></span>
<span class="line"><span style="color:#24292E;">    .</span><span style="color:#6F42C1;">attr</span><span style="color:#24292E;">(</span><span style="color:#032F62;">&#39;id&#39;</span><span style="color:#24292E;">, </span><span style="color:#D73A49;">function</span><span style="color:#24292E;"> (</span><span style="color:#E36209;">d</span><span style="color:#24292E;">, </span><span style="color:#E36209;">i</span><span style="color:#24292E;">) {</span></span>
<span class="line"><span style="color:#24292E;">      d.id </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> i</span></span>
<span class="line"><span style="color:#24292E;">      </span><span style="color:#D73A49;">return</span><span style="color:#24292E;"> </span><span style="color:#032F62;">&#39;rect-text-&#39;</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">+</span><span style="color:#24292E;"> i</span></span>
<span class="line"><span style="color:#24292E;">    })</span></span>
<span class="line"><span style="color:#24292E;">    .</span><span style="color:#6F42C1;">append</span><span style="color:#24292E;">(</span><span style="color:#032F62;">&#39;tspan&#39;</span><span style="color:#24292E;">)</span></span>
<span class="line"><span style="color:#24292E;">    .</span><span style="color:#6F42C1;">attr</span><span style="color:#24292E;">(</span><span style="color:#032F62;">&#39;font-size&#39;</span><span style="color:#24292E;">, </span><span style="color:#005CC5;">9</span><span style="color:#24292E;">)</span></span>
<span class="line"><span style="color:#24292E;">    .</span><span style="color:#6F42C1;">attr</span><span style="color:#24292E;">(</span><span style="color:#032F62;">&#39;fill-opacity&#39;</span><span style="color:#24292E;">, </span><span style="color:#005CC5;">0.7</span><span style="color:#24292E;">)</span></span>
<span class="line"><span style="color:#24292E;">    .</span><span style="color:#6F42C1;">text</span><span style="color:#24292E;">(</span><span style="color:#E36209;">d</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">=&gt;</span><span style="color:#24292E;"> </span><span style="color:#032F62;">\` (\${</span><span style="color:#24292E;">d</span><span style="color:#032F62;">.</span><span style="color:#24292E;">value</span><span style="color:#032F62;">.</span><span style="color:#6F42C1;">toLocaleString</span><span style="color:#032F62;">()</span><span style="color:#032F62;">})\`</span><span style="color:#24292E;">)</span></span>
<span class="line"></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#6A737D;">// Coloca el nodo rectángulo</span></span>
<span class="line"><span style="color:#24292E;">  svg.value</span></span>
<span class="line"><span style="color:#24292E;">    .</span><span style="color:#6F42C1;">append</span><span style="color:#24292E;">(</span><span style="color:#032F62;">&#39;g&#39;</span><span style="color:#24292E;">)</span></span>
<span class="line"><span style="color:#24292E;">    .</span><span style="color:#6F42C1;">attr</span><span style="color:#24292E;">(</span><span style="color:#032F62;">&#39;class&#39;</span><span style="color:#24292E;">, </span><span style="color:#032F62;">&#39;grupo-nodos-rectangulos&#39;</span><span style="color:#24292E;">)</span></span>
<span class="line"><span style="color:#24292E;">    .</span><span style="color:#6F42C1;">attr</span><span style="color:#24292E;">(</span><span style="color:#032F62;">&#39;stroke&#39;</span><span style="color:#24292E;">, </span><span style="color:#032F62;">&#39;#333&#39;</span><span style="color:#24292E;">)</span></span>
<span class="line"><span style="color:#24292E;">    .</span><span style="color:#6F42C1;">attr</span><span style="color:#24292E;">(</span><span style="color:#032F62;">&#39;stroke-width&#39;</span><span style="color:#24292E;">, </span><span style="color:#032F62;">&#39;0.75&#39;</span><span style="color:#24292E;">)</span></span>
<span class="line"><span style="color:#24292E;">    .</span><span style="color:#6F42C1;">selectAll</span><span style="color:#24292E;">(</span><span style="color:#032F62;">&#39;rect&#39;</span><span style="color:#24292E;">)</span></span>
<span class="line"><span style="color:#24292E;">    .</span><span style="color:#6F42C1;">data</span><span style="color:#24292E;">(nodes)</span></span>
<span class="line"><span style="color:#24292E;">    .</span><span style="color:#6F42C1;">join</span><span style="color:#24292E;">(</span><span style="color:#032F62;">&#39;rect&#39;</span><span style="color:#24292E;">)</span></span>
<span class="line"><span style="color:#24292E;">    .</span><span style="color:#6F42C1;">attr</span><span style="color:#24292E;">(</span><span style="color:#032F62;">&#39;x&#39;</span><span style="color:#24292E;">, </span><span style="color:#E36209;">d</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">=&gt;</span><span style="color:#24292E;"> d.x0 </span><span style="color:#D73A49;">+</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">1</span><span style="color:#24292E;">)</span></span>
<span class="line"><span style="color:#24292E;">    .</span><span style="color:#6F42C1;">attr</span><span style="color:#24292E;">(</span><span style="color:#032F62;">&#39;y&#39;</span><span style="color:#24292E;">, </span><span style="color:#E36209;">d</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">=&gt;</span><span style="color:#24292E;"> d.y0)</span></span>
<span class="line"><span style="color:#24292E;">    .</span><span style="color:#6F42C1;">attr</span><span style="color:#24292E;">(</span><span style="color:#032F62;">&#39;height&#39;</span><span style="color:#24292E;">, </span><span style="color:#E36209;">d</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">=&gt;</span><span style="color:#24292E;"> d.y1 </span><span style="color:#D73A49;">-</span><span style="color:#24292E;"> d.y0)</span></span>
<span class="line"><span style="color:#24292E;">    .</span><span style="color:#6F42C1;">attr</span><span style="color:#24292E;">(</span><span style="color:#032F62;">&#39;width&#39;</span><span style="color:#24292E;">, </span><span style="color:#E36209;">d</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">=&gt;</span><span style="color:#24292E;"> d.x1 </span><span style="color:#D73A49;">-</span><span style="color:#24292E;"> d.x0 </span><span style="color:#D73A49;">-</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">2</span><span style="color:#24292E;">)</span></span>
<span class="line"><span style="color:#24292E;">    .</span><span style="color:#6F42C1;">attr</span><span style="color:#24292E;">(</span><span style="color:#032F62;">&#39;fill&#39;</span><span style="color:#24292E;">, </span><span style="color:#E36209;">d</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">=&gt;</span><span style="color:#24292E;"> d.color)</span></span>
<span class="line"><span style="color:#24292E;">    .</span><span style="color:#6F42C1;">attr</span><span style="color:#24292E;">(</span><span style="color:#032F62;">&#39;class&#39;</span><span style="color:#24292E;">, </span><span style="color:#032F62;">&#39;node-rect&#39;</span><span style="color:#24292E;">)</span></span>
<span class="line"><span style="color:#24292E;">    .</span><span style="color:#6F42C1;">attr</span><span style="color:#24292E;">(</span><span style="color:#032F62;">&#39;id&#39;</span><span style="color:#24292E;">, </span><span style="color:#D73A49;">function</span><span style="color:#24292E;"> (</span><span style="color:#E36209;">d</span><span style="color:#24292E;">, </span><span style="color:#E36209;">i</span><span style="color:#24292E;">) {</span></span>
<span class="line"><span style="color:#24292E;">      d.id </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> i</span></span>
<span class="line"><span style="color:#24292E;">      </span><span style="color:#D73A49;">return</span><span style="color:#24292E;"> </span><span style="color:#032F62;">&#39;rect-&#39;</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">+</span><span style="color:#24292E;"> i</span></span>
<span class="line"><span style="color:#24292E;">    })</span></span>
<span class="line"><span style="color:#24292E;">    .</span><span style="color:#6F42C1;">on</span><span style="color:#24292E;">(</span><span style="color:#032F62;">&#39;mouseover&#39;</span><span style="color:#24292E;">, </span><span style="color:#D73A49;">function</span><span style="color:#24292E;"> (</span><span style="color:#E36209;">d</span><span style="color:#24292E;">, </span><span style="color:#E36209;">i</span><span style="color:#24292E;">) {</span></span>
<span class="line"><span style="color:#24292E;">      </span><span style="color:#D73A49;">let</span><span style="color:#24292E;"> nodeHiglight </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> []</span></span>
<span class="line"></span>
<span class="line"><span style="color:#24292E;">      link</span></span>
<span class="line"><span style="color:#24292E;">        .</span><span style="color:#6F42C1;">transition</span><span style="color:#24292E;">()</span></span>
<span class="line"><span style="color:#24292E;">        .</span><span style="color:#6F42C1;">duration</span><span style="color:#24292E;">(</span><span style="color:#005CC5;">300</span><span style="color:#24292E;">)</span></span>
<span class="line"><span style="color:#24292E;">        .</span><span style="color:#6F42C1;">style</span><span style="color:#24292E;">(</span><span style="color:#032F62;">&#39;stroke-opacity&#39;</span><span style="color:#24292E;">, </span><span style="color:#D73A49;">function</span><span style="color:#24292E;"> (</span><span style="color:#E36209;">l</span><span style="color:#24292E;">) {</span></span>
<span class="line"><span style="color:#24292E;">          </span><span style="color:#D73A49;">if</span><span style="color:#24292E;"> (l.source.index </span><span style="color:#D73A49;">===</span><span style="color:#24292E;"> i.index </span><span style="color:#D73A49;">||</span><span style="color:#24292E;"> l.target.index </span><span style="color:#D73A49;">===</span><span style="color:#24292E;"> i.index) {</span></span>
<span class="line"><span style="color:#24292E;">            nodeHiglight.</span><span style="color:#6F42C1;">push</span><span style="color:#24292E;">(l.target.id)</span></span>
<span class="line"><span style="color:#24292E;">            nodeHiglight.</span><span style="color:#6F42C1;">push</span><span style="color:#24292E;">(l.source.id)</span></span>
<span class="line"><span style="color:#24292E;">          }</span></span>
<span class="line"><span style="color:#24292E;">          </span><span style="color:#D73A49;">return</span><span style="color:#24292E;"> l.source.index </span><span style="color:#D73A49;">===</span><span style="color:#24292E;"> i.index </span><span style="color:#D73A49;">||</span><span style="color:#24292E;"> l.target.index </span><span style="color:#D73A49;">===</span><span style="color:#24292E;"> i.index</span></span>
<span class="line"><span style="color:#24292E;">            </span><span style="color:#D73A49;">?</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">1</span></span>
<span class="line"><span style="color:#24292E;">            </span><span style="color:#D73A49;">:</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">0.2</span></span>
<span class="line"><span style="color:#24292E;">        })</span></span>
<span class="line"></span>
<span class="line"><span style="color:#24292E;">      tooltip.value.</span><span style="color:#6F42C1;">style</span><span style="color:#24292E;">(</span><span style="color:#032F62;">&#39;background-color&#39;</span><span style="color:#24292E;">, i.color)</span></span>
<span class="line"><span style="color:#24292E;">      tooltip.value.</span><span style="color:#6F42C1;">style</span><span style="color:#24292E;">(</span><span style="color:#032F62;">&#39;color&#39;</span><span style="color:#24292E;">, i.color </span><span style="color:#D73A49;">===</span><span style="color:#24292E;"> </span><span style="color:#032F62;">&#39;#000000&#39;</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">?</span><span style="color:#24292E;"> </span><span style="color:#032F62;">&#39;#FFF&#39;</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">:</span><span style="color:#24292E;"> </span><span style="color:#032F62;">&#39;#000&#39;</span><span style="color:#24292E;">)</span></span>
<span class="line"><span style="color:#24292E;">      tooltip.value.</span><span style="color:#6F42C1;">text</span><span style="color:#24292E;">(</span></span>
<span class="line"><span style="color:#24292E;">        </span><span style="color:#032F62;">&#39;&#39;</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">+</span><span style="color:#24292E;"> i.name </span><span style="color:#D73A49;">+</span><span style="color:#24292E;"> </span><span style="color:#032F62;">&#39; : &#39;</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">+</span><span style="color:#24292E;"> i.value.</span><span style="color:#6F42C1;">toLocaleString</span><span style="color:#24292E;">() </span><span style="color:#D73A49;">+</span><span style="color:#24292E;"> </span><span style="color:#032F62;">&#39; ton/día.&#39;</span></span>
<span class="line"><span style="color:#24292E;">      )</span></span>
<span class="line"><span style="color:#24292E;">      tooltip.value.</span><span style="color:#6F42C1;">style</span><span style="color:#24292E;">(</span><span style="color:#032F62;">&#39;visibility&#39;</span><span style="color:#24292E;">, </span><span style="color:#032F62;">&#39;visible&#39;</span><span style="color:#24292E;">)</span></span>
<span class="line"></span>
<span class="line"><span style="color:#24292E;">      d3.</span><span style="color:#6F42C1;">selectAll</span><span style="color:#24292E;">(</span><span style="color:#032F62;">&#39;.node-rect&#39;</span><span style="color:#24292E;">).</span><span style="color:#6F42C1;">style</span><span style="color:#24292E;">(</span><span style="color:#032F62;">&#39;opacity&#39;</span><span style="color:#24292E;">, </span><span style="color:#005CC5;">0.2</span><span style="color:#24292E;">)</span></span>
<span class="line"><span style="color:#24292E;">      d3.</span><span style="color:#6F42C1;">selectAll</span><span style="color:#24292E;">(</span><span style="color:#032F62;">&#39;.node-text-rect&#39;</span><span style="color:#24292E;">).</span><span style="color:#6F42C1;">style</span><span style="color:#24292E;">(</span><span style="color:#032F62;">&#39;opacity&#39;</span><span style="color:#24292E;">, </span><span style="color:#005CC5;">0.2</span><span style="color:#24292E;">)</span></span>
<span class="line"><span style="color:#24292E;">      </span><span style="color:#D73A49;">for</span><span style="color:#24292E;"> (</span><span style="color:#D73A49;">let</span><span style="color:#24292E;"> i </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">0</span><span style="color:#24292E;">; i </span><span style="color:#D73A49;">&lt;</span><span style="color:#24292E;"> nodeHiglight.</span><span style="color:#005CC5;">length</span><span style="color:#24292E;">; i</span><span style="color:#D73A49;">++</span><span style="color:#24292E;">) {</span></span>
<span class="line"><span style="color:#24292E;">        d3.</span><span style="color:#6F42C1;">select</span><span style="color:#24292E;">(</span><span style="color:#032F62;">&#39;#rect-&#39;</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">+</span><span style="color:#24292E;"> nodeHiglight[i]).</span><span style="color:#6F42C1;">style</span><span style="color:#24292E;">(</span><span style="color:#032F62;">&#39;opacity&#39;</span><span style="color:#24292E;">, </span><span style="color:#005CC5;">1</span><span style="color:#24292E;">)</span></span>
<span class="line"><span style="color:#24292E;">        d3.</span><span style="color:#6F42C1;">select</span><span style="color:#24292E;">(</span><span style="color:#032F62;">&#39;#rect-text-&#39;</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">+</span><span style="color:#24292E;"> nodeHiglight[i]).</span><span style="color:#6F42C1;">style</span><span style="color:#24292E;">(</span><span style="color:#032F62;">&#39;opacity&#39;</span><span style="color:#24292E;">, </span><span style="color:#005CC5;">1</span><span style="color:#24292E;">)</span></span>
<span class="line"><span style="color:#24292E;">      }</span></span>
<span class="line"><span style="color:#24292E;">    })</span></span>
<span class="line"><span style="color:#24292E;">    .</span><span style="color:#6F42C1;">on</span><span style="color:#24292E;">(</span><span style="color:#032F62;">&#39;mouseleave&#39;</span><span style="color:#24292E;">, </span><span style="color:#D73A49;">function</span><span style="color:#24292E;"> () {</span></span>
<span class="line"><span style="color:#24292E;">      link.</span><span style="color:#6F42C1;">transition</span><span style="color:#24292E;">().</span><span style="color:#6F42C1;">duration</span><span style="color:#24292E;">(</span><span style="color:#005CC5;">300</span><span style="color:#24292E;">).</span><span style="color:#6F42C1;">style</span><span style="color:#24292E;">(</span><span style="color:#032F62;">&#39;stroke-opacity&#39;</span><span style="color:#24292E;">, </span><span style="color:#005CC5;">0.5</span><span style="color:#24292E;">)</span></span>
<span class="line"></span>
<span class="line"><span style="color:#24292E;">      d3.</span><span style="color:#6F42C1;">selectAll</span><span style="color:#24292E;">(</span><span style="color:#032F62;">&#39;.node-text-rect&#39;</span><span style="color:#24292E;">).</span><span style="color:#6F42C1;">style</span><span style="color:#24292E;">(</span><span style="color:#032F62;">&#39;opacity&#39;</span><span style="color:#24292E;">, </span><span style="color:#005CC5;">1</span><span style="color:#24292E;">)</span></span>
<span class="line"><span style="color:#24292E;">      d3.</span><span style="color:#6F42C1;">selectAll</span><span style="color:#24292E;">(</span><span style="color:#032F62;">&#39;.node-rect&#39;</span><span style="color:#24292E;">).</span><span style="color:#6F42C1;">style</span><span style="color:#24292E;">(</span><span style="color:#032F62;">&#39;opacity&#39;</span><span style="color:#24292E;">, </span><span style="color:#005CC5;">1</span><span style="color:#24292E;">)</span></span>
<span class="line"><span style="color:#24292E;">      tooltip.value.</span><span style="color:#6F42C1;">style</span><span style="color:#24292E;">(</span><span style="color:#032F62;">&#39;visibility&#39;</span><span style="color:#24292E;">, </span><span style="color:#032F62;">&#39;hidden&#39;</span><span style="color:#24292E;">)</span></span>
<span class="line"><span style="color:#24292E;">    })</span></span>
<span class="line"><span style="color:#24292E;">    .</span><span style="color:#6F42C1;">on</span><span style="color:#24292E;">(</span><span style="color:#032F62;">&#39;mousemove&#39;</span><span style="color:#24292E;">, </span><span style="color:#D73A49;">function</span><span style="color:#24292E;"> (</span><span style="color:#E36209;">d</span><span style="color:#24292E;">) {</span></span>
<span class="line"><span style="color:#24292E;">      </span><span style="color:#D73A49;">return</span><span style="color:#24292E;"> tooltip.value</span></span>
<span class="line"><span style="color:#24292E;">        .</span><span style="color:#6F42C1;">style</span><span style="color:#24292E;">(</span><span style="color:#032F62;">&#39;top&#39;</span><span style="color:#24292E;">, d.pageY </span><span style="color:#D73A49;">+</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">10</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">+</span><span style="color:#24292E;"> </span><span style="color:#032F62;">&#39;px&#39;</span><span style="color:#24292E;">)</span></span>
<span class="line"><span style="color:#24292E;">        .</span><span style="color:#6F42C1;">style</span><span style="color:#24292E;">(</span><span style="color:#032F62;">&#39;left&#39;</span><span style="color:#24292E;">, d.pageX </span><span style="color:#D73A49;">+</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">10</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">+</span><span style="color:#24292E;"> </span><span style="color:#032F62;">&#39;px&#39;</span><span style="color:#24292E;">)</span></span>
<span class="line"><span style="color:#24292E;">    })</span></span>
<span class="line"><span style="color:#24292E;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#D73A49;">function</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">reescalandoPantalla</span><span style="color:#24292E;">() {</span></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#6F42C1;">configurandoDimensionesParaSVG</span><span style="color:#24292E;">()</span></span>
<span class="line"><span style="color:#24292E;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6F42C1;">onMounted</span><span style="color:#24292E;">(() </span><span style="color:#D73A49;">=&gt;</span><span style="color:#24292E;"> {</span></span>
<span class="line"><span style="color:#24292E;">  svg.value </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> d3.</span><span style="color:#6F42C1;">select</span><span style="color:#24292E;">(svgRef.value)</span></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#6A737D;">// .attr(&#39;viewBox&#39;, [0, -20, width.value, height.value + 20])</span></span>
<span class="line"></span>
<span class="line"><span style="color:#24292E;">  tooltip.value </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> d3.</span><span style="color:#6F42C1;">select</span><span style="color:#24292E;">(</span><span style="color:#032F62;">\`div#\${</span><span style="color:#24292E;">props</span><span style="color:#032F62;">.</span><span style="color:#24292E;">sankey_id</span><span style="color:#032F62;">}\`</span><span style="color:#24292E;">).</span><span style="color:#6F42C1;">select</span><span style="color:#24292E;">(</span><span style="color:#032F62;">&#39;div.tooltip&#39;</span><span style="color:#24292E;">)</span></span>
<span class="line"></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#6F42C1;">configurandoDimensionesParaSVG</span><span style="color:#24292E;">()</span></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#6F42C1;">creandoSankey</span><span style="color:#24292E;">()</span></span>
<span class="line"></span>
<span class="line"><span style="color:#24292E;">  window.</span><span style="color:#6F42C1;">addEventListener</span><span style="color:#24292E;">(</span><span style="color:#032F62;">&#39;resize&#39;</span><span style="color:#24292E;">, reescalandoPantalla)</span></span>
<span class="line"><span style="color:#24292E;">})</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6F42C1;">onUnmounted</span><span style="color:#24292E;">(() </span><span style="color:#D73A49;">=&gt;</span><span style="color:#24292E;"> {</span></span>
<span class="line"><span style="color:#24292E;">  window.</span><span style="color:#6F42C1;">removeEventListener</span><span style="color:#24292E;">(</span><span style="color:#032F62;">&#39;resize&#39;</span><span style="color:#24292E;">, reescalandoPantalla)</span></span>
<span class="line"><span style="color:#24292E;">})</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6F42C1;">watch</span><span style="color:#24292E;">(datos, () </span><span style="color:#D73A49;">=&gt;</span><span style="color:#24292E;"> {</span></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#6F42C1;">configurandoDimensionesParaSVG</span><span style="color:#24292E;">()</span></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#6F42C1;">creandoSankey</span><span style="color:#24292E;">()</span></span>
<span class="line"><span style="color:#24292E;">})</span></span>
<span class="line"><span style="color:#24292E;">&lt;/</span><span style="color:#22863A;">script</span><span style="color:#24292E;">&gt;</span></span></code></pre></div><h2 id="html" tabindex="-1">html <a class="header-anchor" href="#html" aria-label="Permalink to &quot;html&quot;">​</a></h2><div class="language-vue vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">vue</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#E1E4E8;">&lt;</span><span style="color:#85E89D;">template</span><span style="color:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="color:#E1E4E8;">  &lt;</span><span style="color:#85E89D;">div</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#B392F0;">:id</span><span style="color:#E1E4E8;">=</span><span style="color:#9ECBFF;">&quot;sankey_id&quot;</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#B392F0;">class</span><span style="color:#E1E4E8;">=</span><span style="color:#9ECBFF;">&quot;sankey-component&quot;</span></span>
<span class="line"><span style="color:#E1E4E8;">  &gt;</span></span>
<span class="line"><span style="color:#E1E4E8;">    &lt;</span><span style="color:#85E89D;">div</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">class</span><span style="color:#E1E4E8;">=</span><span style="color:#9ECBFF;">&quot;tooltip&quot;</span><span style="color:#E1E4E8;">&gt;&lt;/</span><span style="color:#85E89D;">div</span><span style="color:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="color:#E1E4E8;">    &lt;</span><span style="color:#85E89D;">div</span><span style="color:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="color:#E1E4E8;">      &lt;</span><span style="color:#85E89D;">svg</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">ref</span><span style="color:#E1E4E8;">=</span><span style="color:#9ECBFF;">&quot;svgRef&quot;</span><span style="color:#E1E4E8;">&gt;&lt;/</span><span style="color:#85E89D;">svg</span><span style="color:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="color:#E1E4E8;">    &lt;/</span><span style="color:#85E89D;">div</span><span style="color:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="color:#E1E4E8;">  &lt;/</span><span style="color:#85E89D;">div</span><span style="color:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="color:#E1E4E8;">&lt;/</span><span style="color:#85E89D;">template</span><span style="color:#E1E4E8;">&gt;</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#24292E;">&lt;</span><span style="color:#22863A;">template</span><span style="color:#24292E;">&gt;</span></span>
<span class="line"><span style="color:#24292E;">  &lt;</span><span style="color:#22863A;">div</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#6F42C1;">:id</span><span style="color:#24292E;">=</span><span style="color:#032F62;">&quot;sankey_id&quot;</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#6F42C1;">class</span><span style="color:#24292E;">=</span><span style="color:#032F62;">&quot;sankey-component&quot;</span></span>
<span class="line"><span style="color:#24292E;">  &gt;</span></span>
<span class="line"><span style="color:#24292E;">    &lt;</span><span style="color:#22863A;">div</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">class</span><span style="color:#24292E;">=</span><span style="color:#032F62;">&quot;tooltip&quot;</span><span style="color:#24292E;">&gt;&lt;/</span><span style="color:#22863A;">div</span><span style="color:#24292E;">&gt;</span></span>
<span class="line"><span style="color:#24292E;">    &lt;</span><span style="color:#22863A;">div</span><span style="color:#24292E;">&gt;</span></span>
<span class="line"><span style="color:#24292E;">      &lt;</span><span style="color:#22863A;">svg</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">ref</span><span style="color:#24292E;">=</span><span style="color:#032F62;">&quot;svgRef&quot;</span><span style="color:#24292E;">&gt;&lt;/</span><span style="color:#22863A;">svg</span><span style="color:#24292E;">&gt;</span></span>
<span class="line"><span style="color:#24292E;">    &lt;/</span><span style="color:#22863A;">div</span><span style="color:#24292E;">&gt;</span></span>
<span class="line"><span style="color:#24292E;">  &lt;/</span><span style="color:#22863A;">div</span><span style="color:#24292E;">&gt;</span></span>
<span class="line"><span style="color:#24292E;">&lt;/</span><span style="color:#22863A;">template</span><span style="color:#24292E;">&gt;</span></span></code></pre></div></details><p><a href="#arriba">Go top</a></p>`,5),A=JSON.parse('{"title":"Flujo de Residuos Solidos Urbanos de la CDMX","description":"","frontmatter":{"sectionName":"inicio"},"headers":[],"relativePath":"index.md","filePath":"index.md"}'),D={name:"index.md"},m=Object.assign(D,{setup(e){return(n,c)=>(a(),l("div",null,[C,B,o(u),g]))}});export{A as __pageData,m as default};
